{
  "address": "0x4498db60F657B017c76063551c521D23b0AfF4C4",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_allowedERC20Address",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_turnBasedGameAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "MAX_TOKEN_AMOUNT",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_gameTemplateHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "_gameMetadata",
          "type": "bytes"
        },
        {
          "internalType": "address[]",
          "name": "_gameValidators",
          "type": "address[]"
        },
        {
          "internalType": "uint8",
          "name": "_gameNumPlayers",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "_gameMinFunds",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_gameERC20Address",
          "type": "address"
        }
      ],
      "name": "getQueue",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "addr",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "funds",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "info",
              "type": "bytes"
            }
          ],
          "internalType": "struct TurnBasedGameLobby.QueuedPlayer[]",
          "name": "",
          "type": "tuple[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_gameTemplateHash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "_gameMetadata",
          "type": "bytes"
        },
        {
          "internalType": "address[]",
          "name": "_gameValidators",
          "type": "address[]"
        },
        {
          "internalType": "uint8",
          "name": "_gameNumPlayers",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "_gameMinFunds",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_gameERC20Address",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_playerFunds",
          "type": "uint256"
        },
        {
          "internalType": "bytes",
          "name": "_playerInfo",
          "type": "bytes"
        }
      ],
      "name": "joinGame",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "contract IERC20",
          "name": "_tokenProvider",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_playerAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_playerFunds",
          "type": "uint256"
        }
      ],
      "name": "lockFunds",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0xd654f9e431900e14fd2cd2aa1c182da90806e81a9abbebb19af1166be3a53daa",
  "receipt": {
    "to": null,
    "from": "0xF05D57a5BeD2d1B529C56001FC5810cc9afC0335",
    "contractAddress": "0x4498db60F657B017c76063551c521D23b0AfF4C4",
    "transactionIndex": 0,
    "gasUsed": "1588520",
    "logsBloom": "0x00001000000000000000000000000000004000000000000200000000000000000000000000000000000000000000000040008000000000000000000000200000000000000000000000000000000000800001000000000000000100000000004000000000000000000100000000000000000000000000000080000000000000000000000000000100000000000008000000000000000080000000000000000000220000000000000000010000000001000000000001000000000000000000004000000000000000004001000000000000000000000000000000100040000000000010000000000000000000000000000000000000000000000000000000100000",
    "blockHash": "0x3bb13ab5e5908947c30714f7cf76d2878128c35f9ff4ce8ec8f0a9fb4724fa66",
    "transactionHash": "0xd654f9e431900e14fd2cd2aa1c182da90806e81a9abbebb19af1166be3a53daa",
    "logs": [
      {
        "transactionIndex": 0,
        "blockNumber": 15651270,
        "transactionHash": "0xd654f9e431900e14fd2cd2aa1c182da90806e81a9abbebb19af1166be3a53daa",
        "address": "0x253aC655b7f7bB05c95811f617d4B9B78D3f5956",
        "topics": [
          "0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",
          "0x0000000000000000000000004498db60f657b017c76063551c521d23b0aff4c4",
          "0x000000000000000000000000a77badb7e952a3ff2f5b1597c5ce1241ea0094f8"
        ],
        "data": "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",
        "logIndex": 0,
        "blockHash": "0x3bb13ab5e5908947c30714f7cf76d2878128c35f9ff4ce8ec8f0a9fb4724fa66"
      },
      {
        "transactionIndex": 0,
        "blockNumber": 15651270,
        "transactionHash": "0xd654f9e431900e14fd2cd2aa1c182da90806e81a9abbebb19af1166be3a53daa",
        "address": "0x0000000000000000000000000000000000001010",
        "topics": [
          "0x4dfe1bbbcf077ddc3e01291eea2d5c70c2b422b415d95645b9adcfd678cb1d63",
          "0x0000000000000000000000000000000000000000000000000000000000001010",
          "0x000000000000000000000000f05d57a5bed2d1b529c56001fc5810cc9afc0335",
          "0x000000000000000000000000be188d6641e8b680743a4815dfa0f6208038960f"
        ],
        "data": "0x0000000000000000000000000000000000000000000000000070df02ae5f40000000000000000000000000000000000000000000000000001b8efcd5829a20a000000000000000000000000000000000000000000000007dec7ef2ed436b966f0000000000000000000000000000000000000000000000001b1e1dd2d43ae0a000000000000000000000000000000000000000000000007decefd1eff1cad66f",
        "logIndex": 1,
        "blockHash": "0x3bb13ab5e5908947c30714f7cf76d2878128c35f9ff4ce8ec8f0a9fb4724fa66"
      }
    ],
    "blockNumber": 15651270,
    "cumulativeGasUsed": "1588520",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x253aC655b7f7bB05c95811f617d4B9B78D3f5956",
    "0xa77BadB7E952A3FF2f5B1597C5cE1241EA0094F8"
  ],
  "solcInputHash": "9682768dea776c4c337afaf366f4c424",
  "metadata": "{\"compiler\":{\"version\":\"0.7.4+commit.3f05b770\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_allowedERC20Address\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_turnBasedGameAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"MAX_TOKEN_AMOUNT\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_gameTemplateHash\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"_gameMetadata\",\"type\":\"bytes\"},{\"internalType\":\"address[]\",\"name\":\"_gameValidators\",\"type\":\"address[]\"},{\"internalType\":\"uint8\",\"name\":\"_gameNumPlayers\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"_gameMinFunds\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_gameERC20Address\",\"type\":\"address\"}],\"name\":\"getQueue\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"funds\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"info\",\"type\":\"bytes\"}],\"internalType\":\"struct TurnBasedGameLobby.QueuedPlayer[]\",\"name\":\"\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_gameTemplateHash\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"_gameMetadata\",\"type\":\"bytes\"},{\"internalType\":\"address[]\",\"name\":\"_gameValidators\",\"type\":\"address[]\"},{\"internalType\":\"uint8\",\"name\":\"_gameNumPlayers\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"_gameMinFunds\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_gameERC20Address\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_playerFunds\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"_playerInfo\",\"type\":\"bytes\"}],\"name\":\"joinGame\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"_tokenProvider\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_playerAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_playerFunds\",\"type\":\"uint256\"}],\"name\":\"lockFunds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"constructor\":{\"params\":{\"_allowedERC20Address\":\"address of the ERC20 compatible token provider\",\"_turnBasedGameAddress\":\"address of the TurnBasedGame contract used for starting games\"}},\"getQueue(bytes32,bytes,address[],uint8,uint256,address)\":{\"params\":{\"_gameERC20Address\":\"address for a ERC20 compatible token provider\",\"_gameMetadata\":\"game-specific initial metadata/parameters\",\"_gameMinFunds\":\"minimum funds required to be staked in order to join the game\",\"_gameNumPlayers\":\"number of players in the game\",\"_gameTemplateHash\":\"template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\",\"_gameValidators\":\"addresses of the validator nodes that will run a Descartes verification should it be needed\"},\"returns\":{\"_0\":\"array of QueuedPlayer structs representing the currently enqueued players for the specified game\"}},\"joinGame(bytes32,bytes,address[],uint8,uint256,address,uint256,bytes)\":{\"params\":{\"_gameERC20Address\":\"address for a ERC20 compatible token provider\",\"_gameMetadata\":\"game-specific initial metadata/parameters\",\"_gameMinFunds\":\"minimum funds required to be staked in order to join the game\",\"_gameNumPlayers\":\"number of players in the game\",\"_gameTemplateHash\":\"template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\",\"_gameValidators\":\"addresses of the validator nodes that will run a Descartes verification should it be needed\",\"_playerFunds\":\"amount being staked by the player joining the game\",\"_playerInfo\":\"game-specific information for the player joining the game\"}},\"lockFunds(address,address,uint256)\":{\"params\":{\"_playerAddress\":\"address for the player whose tokens will be locked in lobby account\",\"_playerFunds\":\"amount being staked by the player joining the game\",\"_tokenProvider\":\"ERC20 compatible token provider instance\"}}},\"title\":\"TurnBasedGameLobby\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"constructor\":{\"notice\":\"Constructor\"},\"getQueue(bytes32,bytes,address[],uint8,uint256,address)\":{\"notice\":\"Retrieves the current queue for a given game (specified by its template hash, metadata and number of players)\"},\"joinGame(bytes32,bytes,address[],uint8,uint256,address,uint256,bytes)\":{\"notice\":\"Allows a player to join a game. People are queued up as they join and the game starts when enough people are available.\"},\"lockFunds(address,address,uint256)\":{\"notice\":\"Lock player tokens in the lobby contract until the game start\"}},\"notice\":\"Entry point for players to join games handled by the TurnBasedGame contract\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/TurnBasedGameLobby.sol\":\"TurnBasedGameLobby\"},\"evmVersion\":\"istanbul\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[]},\"sources\":{\"@cartesi/descartes-sdk/contracts/DescartesInterface.sol\":{\"content\":\"// SPDX-License-Identifier: Apache-2.0\\n//                                  Apache License\\n//                            Version 2.0, January 2004\\n//                         http://www.apache.org/licenses/\\n\\n//    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\\n\\n//    1. Definitions.\\n\\n//       \\\"License\\\" shall mean the terms and conditions for use, reproduction,\\n//       and distribution as defined by Sections 1 through 9 of this document.\\n\\n//       \\\"Licensor\\\" shall mean the copyright owner or entity authorized by\\n//       the copyright owner that is granting the License.\\n\\n//       \\\"Legal Entity\\\" shall mean the union of the acting entity and all\\n//       other entities that control, are controlled by, or are under common\\n//       control with that entity. For the purposes of this definition,\\n//       \\\"control\\\" means (i) the power, direct or indirect, to cause the\\n//       direction or management of such entity, whether by contract or\\n//       otherwise, or (ii) ownership of fifty percent (50%) or more of the\\n//       outstanding shares, or (iii) beneficial ownership of such entity.\\n\\n//       \\\"You\\\" (or \\\"Your\\\") shall mean an individual or Legal Entity\\n//       exercising permissions granted by this License.\\n\\n//       \\\"Source\\\" form shall mean the preferred form for making modifications,\\n//       including but not limited to software source code, documentation\\n//       source, and configuration files.\\n\\n//       \\\"Object\\\" form shall mean any form resulting from mechanical\\n//       transformation or translation of a Source form, including but\\n//       not limited to compiled object code, generated documentation,\\n//       and conversions to other media types.\\n\\n//       \\\"Work\\\" shall mean the work of authorship, whether in Source or\\n//       Object form, made available under the License, as indicated by a\\n//       copyright notice that is included in or attached to the work\\n//       (an example is provided in the Appendix below).\\n\\n//       \\\"Derivative Works\\\" shall mean any work, whether in Source or Object\\n//       form, that is based on (or derived from) the Work and for which the\\n//       editorial revisions, annotations, elaborations, or other modifications\\n//       represent, as a whole, an original work of authorship. For the purposes\\n//       of this License, Derivative Works shall not include works that remain\\n//       separable from, or merely link (or bind by name) to the interfaces of,\\n//       the Work and Derivative Works thereof.\\n\\n//       \\\"Contribution\\\" shall mean any work of authorship, including\\n//       the original version of the Work and any modifications or additions\\n//       to that Work or Derivative Works thereof, that is intentionally\\n//       submitted to Licensor for inclusion in the Work by the copyright owner\\n//       or by an individual or Legal Entity authorized to submit on behalf of\\n//       the copyright owner. For the purposes of this definition, \\\"submitted\\\"\\n//       means any form of electronic, verbal, or written communication sent\\n//       to the Licensor or its representatives, including but not limited to\\n//       communication on electronic mailing lists, source code control systems,\\n//       and issue tracking systems that are managed by, or on behalf of, the\\n//       Licensor for the purpose of discussing and improving the Work, but\\n//       excluding communication that is conspicuously marked or otherwise\\n//       designated in writing by the copyright owner as \\\"Not a Contribution.\\\"\\n\\n//       \\\"Contributor\\\" shall mean Licensor and any individual or Legal Entity\\n//       on behalf of whom a Contribution has been received by Licensor and\\n//       subsequently incorporated within the Work.\\n\\n//    2. Grant of Copyright License. Subject to the terms and conditions of\\n//       this License, each Contributor hereby grants to You a perpetual,\\n//       worldwide, non-exclusive, no-charge, royalty-free, irrevocable\\n//       copyright license to reproduce, prepare Derivative Works of,\\n//       publicly display, publicly perform, sublicense, and distribute the\\n//       Work and such Derivative Works in Source or Object form.\\n\\n//    3. Grant of Patent License. Subject to the terms and conditions of\\n//       this License, each Contributor hereby grants to You a perpetual,\\n//       worldwide, non-exclusive, no-charge, royalty-free, irrevocable\\n//       (except as stated in this section) patent license to make, have made,\\n//       use, offer to sell, sell, import, and otherwise transfer the Work,\\n//       where such license applies only to those patent claims licensable\\n//       by such Contributor that are necessarily infringed by their\\n//       Contribution(s) alone or by combination of their Contribution(s)\\n//       with the Work to which such Contribution(s) was submitted. If You\\n//       institute patent litigation against any entity (including a\\n//       cross-claim or counterclaim in a lawsuit) alleging that the Work\\n//       or a Contribution incorporated within the Work constitutes direct\\n//       or contributory patent infringement, then any patent licenses\\n//       granted to You under this License for that Work shall terminate\\n//       as of the date such litigation is filed.\\n\\n//    4. Redistribution. You may reproduce and distribute copies of the\\n//       Work or Derivative Works thereof in any medium, with or without\\n//       modifications, and in Source or Object form, provided that You\\n//       meet the following conditions:\\n\\n//       (a) You must give any other recipients of the Work or\\n//           Derivative Works a copy of this License; and\\n\\n//       (b) You must cause any modified files to carry prominent notices\\n//           stating that You changed the files; and\\n\\n//       (c) You must retain, in the Source form of any Derivative Works\\n//           that You distribute, all copyright, patent, trademark, and\\n//           attribution notices from the Source form of the Work,\\n//           excluding those notices that do not pertain to any part of\\n//           the Derivative Works; and\\n\\n//       (d) If the Work includes a \\\"NOTICE\\\" text file as part of its\\n//           distribution, then any Derivative Works that You distribute must\\n//           include a readable copy of the attribution notices contained\\n//           within such NOTICE file, excluding those notices that do not\\n//           pertain to any part of the Derivative Works, in at least one\\n//           of the following places: within a NOTICE text file distributed\\n//           as part of the Derivative Works; within the Source form or\\n//           documentation, if provided along with the Derivative Works; or,\\n//           within a display generated by the Derivative Works, if and\\n//           wherever such third-party notices normally appear. The contents\\n//           of the NOTICE file are for informational purposes only and\\n//           do not modify the License. You may add Your own attribution\\n//           notices within Derivative Works that You distribute, alongside\\n//           or as an addendum to the NOTICE text from the Work, provided\\n//           that such additional attribution notices cannot be construed\\n//           as modifying the License.\\n\\n//       You may add Your own copyright statement to Your modifications and\\n//       may provide additional or different license terms and conditions\\n//       for use, reproduction, or distribution of Your modifications, or\\n//       for any such Derivative Works as a whole, provided Your use,\\n//       reproduction, and distribution of the Work otherwise complies with\\n//       the conditions stated in this License.\\n\\n//    5. Submission of Contributions. Unless You explicitly state otherwise,\\n//       any Contribution intentionally submitted for inclusion in the Work\\n//       by You to the Licensor shall be under the terms and conditions of\\n//       this License, without any additional terms or conditions.\\n//       Notwithstanding the above, nothing herein shall supersede or modify\\n//       the terms of any separate license agreement you may have executed\\n//       with Licensor regarding such Contributions.\\n\\n//    6. Trademarks. This License does not grant permission to use the trade\\n//       names, trademarks, service marks, or product names of the Licensor,\\n//       except as required for reasonable and customary use in describing the\\n//       origin of the Work and reproducing the content of the NOTICE file.\\n\\n//    7. Disclaimer of Warranty. Unless required by applicable law or\\n//       agreed to in writing, Licensor provides the Work (and each\\n//       Contributor provides its Contributions) on an \\\"AS IS\\\" BASIS,\\n//       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\\n//       implied, including, without limitation, any warranties or conditions\\n//       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\\n//       PARTICULAR PURPOSE. You are solely responsible for determining the\\n//       appropriateness of using or redistributing the Work and assume any\\n//       risks associated with Your exercise of permissions under this License.\\n\\n//    8. Limitation of Liability. In no event and under no legal theory,\\n//       whether in tort (including negligence), contract, or otherwise,\\n//       unless required by applicable law (such as deliberate and grossly\\n//       negligent acts) or agreed to in writing, shall any Contributor be\\n//       liable to You for damages, including any direct, indirect, special,\\n//       incidental, or consequential damages of any character arising as a\\n//       result of this License or out of the use or inability to use the\\n//       Work (including but not limited to damages for loss of goodwill,\\n//       work stoppage, computer failure or malfunction, or any and all\\n//       other commercial damages or losses), even if such Contributor\\n//       has been advised of the possibility of such damages.\\n\\n//    9. Accepting Warranty or Additional Liability. While redistributing\\n//       the Work or Derivative Works thereof, You may choose to offer,\\n//       and charge a fee for, acceptance of support, warranty, indemnity,\\n//       or other liability obligations and/or rights consistent with this\\n//       License. However, in accepting such obligations, You may act only\\n//       on Your own behalf and on Your sole responsibility, not on behalf\\n//       of any other Contributor, and only if You agree to indemnify,\\n//       defend, and hold each Contributor harmless for any liability\\n//       incurred by, or claims asserted against, such Contributor by reason\\n//       of your accepting any such warranty or additional liability.\\n\\n//    END OF TERMS AND CONDITIONS\\n\\n//    Copyright (C) 2020 Cartesi Pte. Ltd.\\n\\n//    Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n//    you may not use this file except in compliance with the License.\\n//    You may obtain a copy of the License at\\n\\n//        http://www.apache.org/licenses/LICENSE-2.0\\n\\n//    Unless required by applicable law or agreed to in writing, software\\n//    distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n//    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n//    See the License for the specific language governing permissions and\\n//    limitations under the License.\\n\\n/// @title DescartesInterface\\n/// @author Stephen Chen\\npragma solidity ^0.7.0;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"@cartesi/util/contracts/Instantiator.sol\\\";\\n\\n\\ninterface DescartesInterface is Instantiator {\\n\\n    enum State {\\n        WaitingProviders,\\n        ProviderMissedDeadline,\\n        WaitingChallengeDrives,\\n        WaitingReveals,\\n        WaitingClaim,\\n        ClaimerMissedDeadline,\\n        WaitingConfirmationDeadline, // \\\"Voting Phase\\\"\\n        WaitingChallengeResult, // \\\"Voting Phase\\\"\\n        ChallengerWon,\\n        ClaimerWon,\\n        ConsensusResult\\n    }\\n\\n    /*\\n    There are two types of drive, one is directDrive, and the other is loggerDrive.\\n    directDrive has content inserted to the directValue field with up to 1MB;\\n    loggerDrive has content submitted to the logger contract,\\n    which can be retrieved with driveLog2Size and loggerRootHash.\\n    The needsLogger field is set to true for loggerDrive, false for directDrive.\\n\\n    The waitsProvider field is set to true meaning the drive is not ready,\\n    and needs to be filled during the WaitingProviders phase.\\n    The provider field is the user who is responsible for filling out the drive.\\n    I.e the directValue of directDrive, or the loggerRootHash of loggerDrive\\n    */\\n    struct Drive {\\n        // start position of the drive\\n        uint64 position;\\n        // log2 size of the drive in the unit of bytes\\n        uint8 driveLog2Size;\\n        // direct value inserted to the drive\\n        bytes directValue;\\n        // ipfs object path of the logger drive\\n        bytes loggerIpfsPath;\\n        // root hash of the drive submitted to the logger\\n        bytes32 loggerRootHash;\\n        // the user who's responsible for filling out the drive\\n        address provider;\\n        // indicates the drive needs to wait for the provider to provide content\\n        bool waitsProvider;\\n        // indicates the content of the drive must be retrieved from logger\\n        bool needsLogger;\\n    }\\n\\n    struct Party {\\n        bool isParty;\\n        bool hasVoted;\\n        bool hasCheated;\\n        uint64 arrayIdx;\\n    }\\n\\n    /// @notice Instantiate a Descartes SDK instance.\\n    /// @param _finalTime max cycle of the machine for that computation\\n    /// @param _templateHash hash of the machine with all drives empty\\n    /// @param _outputPosition position of the output drive\\n    /// @param _roundDuration duration of the round (security param)\\n    /// @param _inputDrives an array of drive which assemble the machine\\n    /// @return uint256, Descartes index\\n    function instantiate(\\n        uint256 _finalTime,\\n        bytes32 _templateHash,\\n        uint64 _outputPosition,\\n        uint8 _outputLog2Size,\\n        uint256 _roundDuration,\\n        address[] memory parties,\\n        Drive[] memory _inputDrives) external returns (uint256);\\n\\n    /// @notice Get result of a finished instance.\\n    /// @param _index index of Descartes instance to get result\\n    /// @return bool, indicates the result is ready\\n    /// @return bool, indicates the sdk is still running\\n    /// @return address, the user to blame for the abnormal stop of the sdk\\n    /// @return bytes32, the result of the sdk if available\\n    function getResult(uint256 _index) external view returns (\\n        bool,\\n        bool,\\n        address,\\n        bytes memory);\\n\\n    /// @notice Deactivate a Descartes SDK instance.\\n    /// @param _index index of Descartes instance to deactivate\\n    function destruct(uint256 _index) external;\\n}\\n\",\"keccak256\":\"0x9efd75dd65254d360675e5a439c8a24fd15795d05b062a68130e9ed62190e403\",\"license\":\"Apache-2.0\"},\"@cartesi/logger/contracts/Logger.sol\":{\"content\":\"// Copyright (C) 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: GPL-3.0-only\\n// This program is free software: you can redistribute it and/or modify it under\\n// the terms of the GNU General Public License as published by the Free Software\\n// Foundation, either version 3 of the License, or (at your option) any later\\n// version.\\n\\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY\\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\\n// PARTICULAR PURPOSE. See the GNU General Public License for more details.\\n\\n// You should have received a copy of the GNU General Public License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\n// Note: This component currently has dependencies that are licensed under the GNU\\n// GPL, version 3, and so you should treat this component as a whole as being under\\n// the GPL version 3. But all Cartesi-written code in this component is licensed\\n// under the Apache License, version 2, or a compatible permissive license, and can\\n// be used independently under the Apache v2 license. After this component is\\n// rewritten, the entire component will be released under the Apache v2 license.\\n\\n\\npragma solidity ^0.7.0;\\n\\nimport \\\"@cartesi/util/contracts/Decorated.sol\\\";\\nimport \\\"@cartesi/util/contracts/Merkle.sol\\\";\\nimport \\\"./LoggerInterface.sol\\\";\\n\\n\\n/// @title Logger\\n/// @author Stephen Chen\\n/// @notice A contract that offers data availability\\n/// @dev This contract is not well-tested yet.\\ncontract Logger is Decorated, LoggerInterface {\\n  // the caller can either provide the full data to generate the Merkle tree root\\n  // or combine the existing hashes in the history to a deeper tree\\n\\n    struct DataEntry {\\n        uint64 log2Size;\\n        bytes32 root;\\n    }\\n\\n    mapping(bytes32 => bool) logSubmitted;\\n    mapping(bytes32 => uint256) logIndex;\\n    mapping(uint256 => bytes32) logRoot;\\n    DataEntry[] dataHistory;\\n\\n    uint256 public currentIndex = 0;\\n\\n    // TODO: get rid of the _data from event\\n    event MerkleRootCalculatedFromData(uint256 indexed _index, bytes8[] _data, bytes32 indexed _root, uint64 _log2Size);\\n    event MerkleRootCalculatedFromHistory(uint256 indexed _index, uint256[] _indices, bytes32 indexed _root, uint64 _log2Size);\\n\\n    /// @notice Calculate the Merkle tree and return the root hash\\n    // @param _hashes The array of words of the file\\n    function calculateMerkleRootFromData(uint64 _log2Size, bytes8[] memory _data) public override returns(bytes32) {\\n        require(_log2Size >= 3, \\\"Has to be at least one word\\\");\\n        require(_log2Size <= 64, \\\"Cannot be bigger than the machine itself\\\");\\n        require(_data.length > 0, \\\"The input array cannot be empty\\\");\\n\\n        bytes8[] memory data = _data;\\n        uint256 power2Length = uint64(2) ** (_log2Size - 3);\\n\\n        require(power2Length >= _data.length, \\\"The input array is bigger than declared log2 size\\\");\\n\\n        if (_data.length != power2Length) {\\n            // pad the list to length of power of 2\\n            bytes8[] memory paddedData = new bytes8[](power2Length);\\n\\n            for (uint256 i = 0; i < _data.length; ++i) {\\n                paddedData[i] = _data[i];\\n            }\\n            for (uint256 i = _data.length; i < paddedData.length; ++i) {\\n                paddedData[i] = 0;\\n            }\\n            data = paddedData;\\n        }\\n\\n        bytes32[] memory hashes = new bytes32[](data.length);\\n\\n        for (uint256 i = 0; i<data.length; ++i) {\\n            hashes[i] = keccak256(abi.encodePacked(data[i]));\\n        }\\n\\n        bytes32 root = Merkle.calculateRootFromPowerOfTwo(hashes);\\n        dataHistory.push(DataEntry(_log2Size, root));\\n        emit MerkleRootCalculatedFromData(\\n            currentIndex,\\n            _data,\\n            root,\\n            _log2Size);\\n        logSubmitted[root] = true;\\n        logIndex[root] = currentIndex;\\n        logRoot[currentIndex] = root;\\n        ++currentIndex;\\n        return root;\\n    }\\n\\n    /// @notice Calculate the Merkle tree and return the root hash\\n    // @param _indices The array of indices of the history\\n    function calculateMerkleRootFromHistory(uint64 _log2Size, uint256[] memory _indices) public returns(bytes32) {\\n        require(Merkle.isPowerOf2(_indices.length), \\\"The input array must contain power of 2 elements\\\");\\n\\n        // check indices exist and the value of log2Size matches\\n        for (uint256 i = 0; i<_indices.length; ++i) {\\n            require(currentIndex > _indices[i], \\\"The index of history doesn't exist yet\\\");\\n            require(_log2Size == dataHistory[_indices[i]].log2Size, \\\"The value of log2Size doesn't match in history\\\");\\n        }\\n\\n        bytes32[] memory hashes = new bytes32[](_indices.length);\\n        for (uint256 i = 0; i<_indices.length; ++i) {\\n            hashes[i] = dataHistory[_indices[i]].root;\\n        }\\n\\n        bytes32 root = Merkle.calculateRootFromPowerOfTwo(hashes);\\n\\n        uint64 log2Size = Merkle.getLog2Floor(_indices.length);\\n        dataHistory.push(DataEntry(log2Size + _log2Size, root));\\n        emit MerkleRootCalculatedFromHistory(\\n            currentIndex,\\n            _indices,\\n            root,\\n            log2Size + _log2Size);\\n        logSubmitted[root] = true;\\n        logIndex[root] = currentIndex;\\n        logRoot[currentIndex] = root;\\n        ++currentIndex;\\n        return root;\\n    }\\n\\n    /// @notice Getter function to check if log has been submitted for the given hash\\n    // @param _root The hash value to check in the logger history\\n    function isLogAvailable(bytes32 _root, uint64 _log2Size) public override view returns(bool) {\\n        if (logSubmitted[_root]) {\\n            return ((dataHistory[logIndex[_root]].log2Size) == _log2Size);\\n        }\\n        return false;\\n    }\\n\\n    /// @notice Getter function to get the index in the history for the given hash\\n    // @param _root The hash value to check in the logger history\\n    function getLogIndex(bytes32 _root) public view returns(uint256) {\\n        return logIndex[_root];\\n    }\\n\\n    /// @notice Getter function to get the root in the history for the given index\\n    // @param _index The index value to check in the logger history\\n    function getLogRoot(uint256 _index) public view returns(bytes32) {\\n        require(_index < currentIndex, \\\"The index doesn't exist in the history\\\");\\n        return logRoot[_index];\\n    }\\n}\\n\",\"keccak256\":\"0x05f4bdd4ae68df1272b4abcf459f6935fe61ae439813d231ecd7c5622cc7d652\",\"license\":\"GPL-3.0-only\"},\"@cartesi/logger/contracts/LoggerInterface.sol\":{\"content\":\"// Copyright (C) 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: GPL-3.0-only\\n// This program is free software: you can redistribute it and/or modify it under\\n// the terms of the GNU General Public License as published by the Free Software\\n// Foundation, either version 3 of the License, or (at your option) any later\\n// version.\\n\\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY\\n// WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A\\n// PARTICULAR PURPOSE. See the GNU General Public License for more details.\\n\\n// You should have received a copy of the GNU General Public License\\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n\\n// Note: This component currently has dependencies that are licensed under the GNU\\n// GPL, version 3, and so you should treat this component as a whole as being under\\n// the GPL version 3. But all Cartesi-written code in this component is licensed\\n// under the Apache License, version 2, or a compatible permissive license, and can\\n// be used independently under the Apache v2 license. After this component is\\n// rewritten, the entire component will be released under the Apache v2 license.\\n\\n\\n/// @title Interface for logger test instantiator\\npragma solidity ^0.7.0;\\n\\n\\ninterface LoggerInterface {\\n    function isLogAvailable(bytes32 _root, uint64 _log2Size) external view returns(bool);\\n\\n    function calculateMerkleRootFromData(uint64 _log2Size, bytes8[] memory _data) external returns(bytes32);\\n}\\n\",\"keccak256\":\"0x529cc083d7bf62b13d083f10baf2b3d2b33b15612ea605fb84ec2da0c3b0e7a5\",\"license\":\"GPL-3.0-only\"},\"@cartesi/util/contracts/Decorated.sol\":{\"content\":\"// Copyright 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\npragma solidity ^0.7.0;\\n\\n\\ncontract Decorated {\\n    // This contract defines several modifiers but does not use\\n    // them - they will be used in derived contracts.\\n    modifier onlyBy(address user) {\\n        require(msg.sender == user, \\\"Cannot be called by user\\\");\\n        _;\\n    }\\n\\n    modifier onlyAfter(uint256 time) {\\n        require(block.timestamp > time, \\\"Cannot be called now\\\");\\n        _;\\n    }\\n}\\n\",\"keccak256\":\"0xdbba019b8f7f93b212a5bbae402ee988321c4fa82ed2b4c9e55b4d7ddf35dcc3\",\"license\":\"Apache-2.0\"},\"@cartesi/util/contracts/Instantiator.sol\":{\"content\":\"// Copyright 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n\\npragma solidity ^0.7.0;\\n\\n\\ninterface Instantiator {\\n\\n    modifier onlyInstantiated(uint256 _index) virtual;\\n\\n    modifier onlyActive(uint256 _index) virtual;\\n\\n    modifier increasesNonce(uint256 _index) virtual;\\n\\n    function isActive(uint256 _index) external view returns (bool);\\n\\n    function getNonce(uint256 _index) external view returns (uint256);\\n\\n    function isConcerned(uint256 _index, address _user) external view returns (bool);\\n\\n    function getSubInstances(uint256 _index, address) external view returns (address[] memory _addresses, uint256[] memory _indices);\\n}\\n\",\"keccak256\":\"0x416e612dc09b10765de32ec06cf0a7ee4e050e16db8bf3b8ad832a6082b7dfd6\",\"license\":\"Apache-2.0\"},\"@cartesi/util/contracts/InstantiatorImpl.sol\":{\"content\":\"// Copyright 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\npragma solidity ^0.7.0;\\n\\nimport \\\"./Instantiator.sol\\\";\\n\\nabstract contract InstantiatorImpl is Instantiator {\\n    uint256 public currentIndex = 0;\\n\\n    mapping(uint256 => bool) internal active;\\n    mapping(uint256 => uint256) internal nonce;\\n\\n    modifier onlyInstantiated(uint256 _index) override {\\n        require(currentIndex > _index, \\\"Index not instantiated\\\");\\n        _;\\n    }\\n\\n    modifier onlyActive(uint256 _index) override {\\n        require(currentIndex > _index, \\\"Index not instantiated\\\");\\n        require(isActive(_index), \\\"Index inactive\\\");\\n        _;\\n    }\\n\\n    modifier increasesNonce(uint256 _index) override {\\n        nonce[_index]++;\\n        _;\\n    }\\n\\n    function isActive(uint256 _index) public override view returns (bool) {\\n        return (active[_index]);\\n    }\\n\\n    function getNonce(uint256 _index)\\n        public\\n        override\\n        view\\n        onlyActive(_index)\\n        returns (uint256 currentNonce)\\n    {\\n        return nonce[_index];\\n    }\\n\\n    function deactivate(uint256 _index) internal {\\n        active[_index] = false;\\n        nonce[_index] = 0;\\n    }\\n}\\n\",\"keccak256\":\"0x8f8e29b807e5c55198206a370b4d8751cbd98a663e3f89faff274e2f9d7cae75\",\"license\":\"Apache-2.0\"},\"@cartesi/util/contracts/Merkle.sol\":{\"content\":\"// Copyright 2020 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n\\n/// @title Library for Merkle proofs\\npragma solidity ^0.7.0;\\n\\n\\nlibrary Merkle {\\n    function getPristineHash(uint8 _log2Size) public pure returns (bytes32) {\\n        require(_log2Size >= 3, \\\"Has to be at least one word\\\");\\n        require(_log2Size <= 64, \\\"Cannot be bigger than the machine itself\\\");\\n\\n        bytes8 value = 0;\\n        bytes32 runningHash = keccak256(abi.encodePacked(value));\\n\\n        for (uint256 i = 3; i < _log2Size; i++) {\\n            runningHash = keccak256(abi.encodePacked(runningHash, runningHash));\\n        }\\n\\n        return runningHash;\\n    }\\n\\n    function getRoot(uint64 _position, bytes8 _value, bytes32[] memory proof) public pure returns (bytes32) {\\n        bytes32 runningHash = keccak256(abi.encodePacked(_value));\\n\\n        return getRootWithDrive(\\n            _position,\\n            3,\\n            runningHash,\\n            proof\\n        );\\n    }\\n\\n    function getRootWithDrive(\\n        uint64 _position,\\n        uint8 _logOfSize,\\n        bytes32 _drive,\\n        bytes32[] memory siblings\\n    ) public pure returns (bytes32)\\n    {\\n        require(_logOfSize >= 3, \\\"Must be at least a word\\\");\\n        require(_logOfSize <= 64, \\\"Cannot be bigger than the machine itself\\\");\\n\\n        uint64 size = uint64(2) ** _logOfSize;\\n\\n        require(((size - 1) & _position) == 0, \\\"Position is not aligned\\\");\\n        require(siblings.length == 64 - _logOfSize, \\\"Proof length does not match\\\");\\n\\n        bytes32 drive = _drive;\\n\\n        for (uint64 i = 0; i < siblings.length; i++) {\\n            if ((_position & (size << i)) == 0) {\\n                drive = keccak256(abi.encodePacked(drive, siblings[i]));\\n            } else {\\n                drive = keccak256(abi.encodePacked(siblings[i], drive));\\n            }\\n        }\\n\\n        return drive;\\n    }\\n\\n    function getLog2Floor(uint256 number) public pure returns (uint8) {\\n\\n        uint8 result = 0;\\n\\n        uint256 checkNumber = number;\\n        checkNumber = checkNumber >> 1;\\n        while (checkNumber > 0) {\\n            ++result;\\n            checkNumber = checkNumber >> 1;\\n        }\\n\\n        return result;\\n    }\\n\\n    function isPowerOf2(uint256 number) public pure returns (bool) {\\n\\n        uint256 checkNumber = number;\\n        if (checkNumber == 0) {\\n            return false;\\n        }\\n\\n        while ((checkNumber & 1) == 0) {\\n            checkNumber = checkNumber >> 1;\\n        }\\n\\n        checkNumber = checkNumber >> 1;\\n\\n        if (checkNumber == 0) {\\n            return true;\\n        }\\n\\n        return false;\\n    }\\n\\n    /// @notice Calculate the root of Merkle tree from an array of power of 2 elements\\n    /// @param hashes The array containing power of 2 elements\\n    /// @return byte32 the root hash being calculated\\n    function calculateRootFromPowerOfTwo(bytes32[] memory hashes) public pure returns (bytes32) {\\n        // revert when the input is not of power of 2\\n        require(isPowerOf2(hashes.length), \\\"The input array must contain power of 2 elements\\\");\\n\\n        if (hashes.length == 1) {\\n            return hashes[0];\\n        }else {\\n            bytes32[] memory newHashes = new bytes32[](hashes.length >> 1);\\n\\n            for (uint256 i = 0; i < hashes.length; i += 2) {\\n                newHashes[i >> 1] = keccak256(abi.encodePacked(hashes[i], hashes[i + 1]));\\n            }\\n\\n            return calculateRootFromPowerOfTwo(newHashes);\\n        }\\n    }\\n\\n}\\n\",\"keccak256\":\"0xfab427885024176038f230531f5fbc87e80c38b22d7b5307a57a7a0b7cdfc6fe\",\"license\":\"Apache-2.0\"},\"@openzeppelin/contracts/math/SafeMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.0 <0.8.0;\\n\\n/**\\n * @dev Wrappers over Solidity's arithmetic operations with added overflow\\n * checks.\\n *\\n * Arithmetic operations in Solidity wrap on overflow. This can easily result\\n * in bugs, because programmers usually assume that an overflow raises an\\n * error, which is the standard behavior in high level programming languages.\\n * `SafeMath` restores this intuition by reverting the transaction when an\\n * operation overflows.\\n *\\n * Using this library instead of the unchecked operations eliminates an entire\\n * class of bugs, so it's recommended to use it always.\\n */\\nlibrary SafeMath {\\n    /**\\n     * @dev Returns the addition of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        uint256 c = a + b;\\n        if (c < a) return (false, 0);\\n        return (true, c);\\n    }\\n\\n    /**\\n     * @dev Returns the substraction of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        if (b > a) return (false, 0);\\n        return (true, a - b);\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\\n        // benefit is lost if 'b' is also tested.\\n        // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522\\n        if (a == 0) return (true, 0);\\n        uint256 c = a * b;\\n        if (c / a != b) return (false, 0);\\n        return (true, c);\\n    }\\n\\n    /**\\n     * @dev Returns the division of two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        if (b == 0) return (false, 0);\\n        return (true, a / b);\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        if (b == 0) return (false, 0);\\n        return (true, a % b);\\n    }\\n\\n    /**\\n     * @dev Returns the addition of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `+` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Addition cannot overflow.\\n     */\\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\\n        uint256 c = a + b;\\n        require(c >= a, \\\"SafeMath: addition overflow\\\");\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting on\\n     * overflow (when the result is negative).\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\\n        require(b <= a, \\\"SafeMath: subtraction overflow\\\");\\n        return a - b;\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `*` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Multiplication cannot overflow.\\n     */\\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\\n        if (a == 0) return 0;\\n        uint256 c = a * b;\\n        require(c / a == b, \\\"SafeMath: multiplication overflow\\\");\\n        return c;\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        require(b > 0, \\\"SafeMath: division by zero\\\");\\n        return a / b;\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting when dividing by zero.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\\n        require(b > 0, \\\"SafeMath: modulo by zero\\\");\\n        return a % b;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on\\n     * overflow (when the result is negative).\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {trySub}.\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {\\n        require(b <= a, errorMessage);\\n        return a - b;\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting with custom message on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {tryDiv}.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {\\n        require(b > 0, errorMessage);\\n        return a / b;\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting with custom message when dividing by zero.\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {tryMod}.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {\\n        require(b > 0, errorMessage);\\n        return a % b;\\n    }\\n}\\n\",\"keccak256\":\"0xcc78a17dd88fa5a2edc60c8489e2f405c0913b377216a5b26b35656b2d0dab52\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/ERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.0 <0.8.0;\\n\\nimport \\\"../../utils/Context.sol\\\";\\nimport \\\"./IERC20.sol\\\";\\nimport \\\"../../math/SafeMath.sol\\\";\\n\\n/**\\n * @dev Implementation of the {IERC20} interface.\\n *\\n * This implementation is agnostic to the way tokens are created. This means\\n * that a supply mechanism has to be added in a derived contract using {_mint}.\\n * For a generic mechanism see {ERC20PresetMinterPauser}.\\n *\\n * TIP: For a detailed writeup see our guide\\n * https://forum.zeppelin.solutions/t/how-to-implement-erc20-supply-mechanisms/226[How\\n * to implement supply mechanisms].\\n *\\n * We have followed general OpenZeppelin guidelines: functions revert instead\\n * of returning `false` on failure. This behavior is nonetheless conventional\\n * and does not conflict with the expectations of ERC20 applications.\\n *\\n * Additionally, an {Approval} event is emitted on calls to {transferFrom}.\\n * This allows applications to reconstruct the allowance for all accounts just\\n * by listening to said events. Other implementations of the EIP may not emit\\n * these events, as it isn't required by the specification.\\n *\\n * Finally, the non-standard {decreaseAllowance} and {increaseAllowance}\\n * functions have been added to mitigate the well-known issues around setting\\n * allowances. See {IERC20-approve}.\\n */\\ncontract ERC20 is Context, IERC20 {\\n    using SafeMath for uint256;\\n\\n    mapping (address => uint256) private _balances;\\n\\n    mapping (address => mapping (address => uint256)) private _allowances;\\n\\n    uint256 private _totalSupply;\\n\\n    string private _name;\\n    string private _symbol;\\n    uint8 private _decimals;\\n\\n    /**\\n     * @dev Sets the values for {name} and {symbol}, initializes {decimals} with\\n     * a default value of 18.\\n     *\\n     * To select a different value for {decimals}, use {_setupDecimals}.\\n     *\\n     * All three of these values are immutable: they can only be set once during\\n     * construction.\\n     */\\n    constructor (string memory name_, string memory symbol_) public {\\n        _name = name_;\\n        _symbol = symbol_;\\n        _decimals = 18;\\n    }\\n\\n    /**\\n     * @dev Returns the name of the token.\\n     */\\n    function name() public view virtual returns (string memory) {\\n        return _name;\\n    }\\n\\n    /**\\n     * @dev Returns the symbol of the token, usually a shorter version of the\\n     * name.\\n     */\\n    function symbol() public view virtual returns (string memory) {\\n        return _symbol;\\n    }\\n\\n    /**\\n     * @dev Returns the number of decimals used to get its user representation.\\n     * For example, if `decimals` equals `2`, a balance of `505` tokens should\\n     * be displayed to a user as `5,05` (`505 / 10 ** 2`).\\n     *\\n     * Tokens usually opt for a value of 18, imitating the relationship between\\n     * Ether and Wei. This is the value {ERC20} uses, unless {_setupDecimals} is\\n     * called.\\n     *\\n     * NOTE: This information is only used for _display_ purposes: it in\\n     * no way affects any of the arithmetic of the contract, including\\n     * {IERC20-balanceOf} and {IERC20-transfer}.\\n     */\\n    function decimals() public view virtual returns (uint8) {\\n        return _decimals;\\n    }\\n\\n    /**\\n     * @dev See {IERC20-totalSupply}.\\n     */\\n    function totalSupply() public view virtual override returns (uint256) {\\n        return _totalSupply;\\n    }\\n\\n    /**\\n     * @dev See {IERC20-balanceOf}.\\n     */\\n    function balanceOf(address account) public view virtual override returns (uint256) {\\n        return _balances[account];\\n    }\\n\\n    /**\\n     * @dev See {IERC20-transfer}.\\n     *\\n     * Requirements:\\n     *\\n     * - `recipient` cannot be the zero address.\\n     * - the caller must have a balance of at least `amount`.\\n     */\\n    function transfer(address recipient, uint256 amount) public virtual override returns (bool) {\\n        _transfer(_msgSender(), recipient, amount);\\n        return true;\\n    }\\n\\n    /**\\n     * @dev See {IERC20-allowance}.\\n     */\\n    function allowance(address owner, address spender) public view virtual override returns (uint256) {\\n        return _allowances[owner][spender];\\n    }\\n\\n    /**\\n     * @dev See {IERC20-approve}.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     */\\n    function approve(address spender, uint256 amount) public virtual override returns (bool) {\\n        _approve(_msgSender(), spender, amount);\\n        return true;\\n    }\\n\\n    /**\\n     * @dev See {IERC20-transferFrom}.\\n     *\\n     * Emits an {Approval} event indicating the updated allowance. This is not\\n     * required by the EIP. See the note at the beginning of {ERC20}.\\n     *\\n     * Requirements:\\n     *\\n     * - `sender` and `recipient` cannot be the zero address.\\n     * - `sender` must have a balance of at least `amount`.\\n     * - the caller must have allowance for ``sender``'s tokens of at least\\n     * `amount`.\\n     */\\n    function transferFrom(address sender, address recipient, uint256 amount) public virtual override returns (bool) {\\n        _transfer(sender, recipient, amount);\\n        _approve(sender, _msgSender(), _allowances[sender][_msgSender()].sub(amount, \\\"ERC20: transfer amount exceeds allowance\\\"));\\n        return true;\\n    }\\n\\n    /**\\n     * @dev Atomically increases the allowance granted to `spender` by the caller.\\n     *\\n     * This is an alternative to {approve} that can be used as a mitigation for\\n     * problems described in {IERC20-approve}.\\n     *\\n     * Emits an {Approval} event indicating the updated allowance.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     */\\n    function increaseAllowance(address spender, uint256 addedValue) public virtual returns (bool) {\\n        _approve(_msgSender(), spender, _allowances[_msgSender()][spender].add(addedValue));\\n        return true;\\n    }\\n\\n    /**\\n     * @dev Atomically decreases the allowance granted to `spender` by the caller.\\n     *\\n     * This is an alternative to {approve} that can be used as a mitigation for\\n     * problems described in {IERC20-approve}.\\n     *\\n     * Emits an {Approval} event indicating the updated allowance.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     * - `spender` must have allowance for the caller of at least\\n     * `subtractedValue`.\\n     */\\n    function decreaseAllowance(address spender, uint256 subtractedValue) public virtual returns (bool) {\\n        _approve(_msgSender(), spender, _allowances[_msgSender()][spender].sub(subtractedValue, \\\"ERC20: decreased allowance below zero\\\"));\\n        return true;\\n    }\\n\\n    /**\\n     * @dev Moves tokens `amount` from `sender` to `recipient`.\\n     *\\n     * This is internal function is equivalent to {transfer}, and can be used to\\n     * e.g. implement automatic token fees, slashing mechanisms, etc.\\n     *\\n     * Emits a {Transfer} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `sender` cannot be the zero address.\\n     * - `recipient` cannot be the zero address.\\n     * - `sender` must have a balance of at least `amount`.\\n     */\\n    function _transfer(address sender, address recipient, uint256 amount) internal virtual {\\n        require(sender != address(0), \\\"ERC20: transfer from the zero address\\\");\\n        require(recipient != address(0), \\\"ERC20: transfer to the zero address\\\");\\n\\n        _beforeTokenTransfer(sender, recipient, amount);\\n\\n        _balances[sender] = _balances[sender].sub(amount, \\\"ERC20: transfer amount exceeds balance\\\");\\n        _balances[recipient] = _balances[recipient].add(amount);\\n        emit Transfer(sender, recipient, amount);\\n    }\\n\\n    /** @dev Creates `amount` tokens and assigns them to `account`, increasing\\n     * the total supply.\\n     *\\n     * Emits a {Transfer} event with `from` set to the zero address.\\n     *\\n     * Requirements:\\n     *\\n     * - `to` cannot be the zero address.\\n     */\\n    function _mint(address account, uint256 amount) internal virtual {\\n        require(account != address(0), \\\"ERC20: mint to the zero address\\\");\\n\\n        _beforeTokenTransfer(address(0), account, amount);\\n\\n        _totalSupply = _totalSupply.add(amount);\\n        _balances[account] = _balances[account].add(amount);\\n        emit Transfer(address(0), account, amount);\\n    }\\n\\n    /**\\n     * @dev Destroys `amount` tokens from `account`, reducing the\\n     * total supply.\\n     *\\n     * Emits a {Transfer} event with `to` set to the zero address.\\n     *\\n     * Requirements:\\n     *\\n     * - `account` cannot be the zero address.\\n     * - `account` must have at least `amount` tokens.\\n     */\\n    function _burn(address account, uint256 amount) internal virtual {\\n        require(account != address(0), \\\"ERC20: burn from the zero address\\\");\\n\\n        _beforeTokenTransfer(account, address(0), amount);\\n\\n        _balances[account] = _balances[account].sub(amount, \\\"ERC20: burn amount exceeds balance\\\");\\n        _totalSupply = _totalSupply.sub(amount);\\n        emit Transfer(account, address(0), amount);\\n    }\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the `owner` s tokens.\\n     *\\n     * This internal function is equivalent to `approve`, and can be used to\\n     * e.g. set automatic allowances for certain subsystems, etc.\\n     *\\n     * Emits an {Approval} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `owner` cannot be the zero address.\\n     * - `spender` cannot be the zero address.\\n     */\\n    function _approve(address owner, address spender, uint256 amount) internal virtual {\\n        require(owner != address(0), \\\"ERC20: approve from the zero address\\\");\\n        require(spender != address(0), \\\"ERC20: approve to the zero address\\\");\\n\\n        _allowances[owner][spender] = amount;\\n        emit Approval(owner, spender, amount);\\n    }\\n\\n    /**\\n     * @dev Sets {decimals} to a value other than the default one of 18.\\n     *\\n     * WARNING: This function should only be called from the constructor. Most\\n     * applications that interact with token contracts will not expect\\n     * {decimals} to ever change, and may work incorrectly if it does.\\n     */\\n    function _setupDecimals(uint8 decimals_) internal virtual {\\n        _decimals = decimals_;\\n    }\\n\\n    /**\\n     * @dev Hook that is called before any transfer of tokens. This includes\\n     * minting and burning.\\n     *\\n     * Calling conditions:\\n     *\\n     * - when `from` and `to` are both non-zero, `amount` of ``from``'s tokens\\n     * will be to transferred to `to`.\\n     * - when `from` is zero, `amount` tokens will be minted for `to`.\\n     * - when `to` is zero, `amount` of ``from``'s tokens will be burned.\\n     * - `from` and `to` are never both zero.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _beforeTokenTransfer(address from, address to, uint256 amount) internal virtual { }\\n}\\n\",\"keccak256\":\"0xca0c2396dbeb3503b51abf4248ebf77a1461edad513c01529df51850a012bee3\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/ERC20Burnable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.0 <0.8.0;\\n\\nimport \\\"../../utils/Context.sol\\\";\\nimport \\\"./ERC20.sol\\\";\\n\\n/**\\n * @dev Extension of {ERC20} that allows token holders to destroy both their own\\n * tokens and those that they have an allowance for, in a way that can be\\n * recognized off-chain (via event analysis).\\n */\\nabstract contract ERC20Burnable is Context, ERC20 {\\n    using SafeMath for uint256;\\n\\n    /**\\n     * @dev Destroys `amount` tokens from the caller.\\n     *\\n     * See {ERC20-_burn}.\\n     */\\n    function burn(uint256 amount) public virtual {\\n        _burn(_msgSender(), amount);\\n    }\\n\\n    /**\\n     * @dev Destroys `amount` tokens from `account`, deducting from the caller's\\n     * allowance.\\n     *\\n     * See {ERC20-_burn} and {ERC20-allowance}.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have allowance for ``accounts``'s tokens of at least\\n     * `amount`.\\n     */\\n    function burnFrom(address account, uint256 amount) public virtual {\\n        uint256 decreasedAllowance = allowance(account, _msgSender()).sub(amount, \\\"ERC20: burn amount exceeds allowance\\\");\\n\\n        _approve(account, _msgSender(), decreasedAllowance);\\n        _burn(account, amount);\\n    }\\n}\\n\",\"keccak256\":\"0x9c0eb3b0e11d2480d49991dc384f1e5f9c9b9967cc81944d50916a9b9c6c4984\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.0 <0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `recipient`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `sender` to `recipient` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0x5f02220344881ce43204ae4a6281145a67bc52c2bb1290a791857df3d19d78f5\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.0 <0.8.0;\\n\\n/*\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with GSN meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address payable) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes memory) {\\n        this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0x8d3cb350f04ff49cfb10aef08d87f19dcbaecc8027b0bed12f3275cd12f38cf0\",\"license\":\"MIT\"},\"contracts/TurnBasedGame.sol\":{\"content\":\"// Copyright 2021 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n/// @title TurnBasedGame\\n/// @author Milton Jonathan\\npragma solidity ^0.7.0;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"@cartesi/descartes-sdk/contracts/DescartesInterface.sol\\\";\\nimport \\\"@cartesi/logger/contracts/Logger.sol\\\";\\nimport \\\"@cartesi/util/contracts/InstantiatorImpl.sol\\\";\\nimport \\\"./TurnBasedGameContext.sol\\\";\\nimport \\\"./TurnBasedGameUtil.sol\\\";\\n\\n/// @title TurnBasedGame\\n/// @notice Generic contract for handling turn-based games validated by Descartes computations\\ncontract TurnBasedGame is InstantiatorImpl {\\n    // Address for the allowed token provider\\n    address allowedERC20Address;\\n\\n    using TurnBasedGameContext for GameContext;\\n\\n    // Descartes instance used for triggering verified computations\\n    DescartesInterface descartes;\\n    // Logger instance used for storing data in the event history\\n    Logger logger;\\n    // index of an empty chunk of data stored in the logger\\n    uint256 emptyDataLogIndex;\\n\\n    // turn data log2size fixed as 12 (4K)\\n    uint8 constant turnChunkLog2Size = 12;\\n\\n    // game instances\\n    mapping(uint256 => GameContext) internal instances;\\n\\n    /// @notice Constructor\\n    /// @param _allowedERC20Address address of the ERC20 compatible token provider\\n    /// @param _descartesAddress address of the Descartes contract\\n    /// @param _loggerAddress address of the Logger contract\\n    constructor(\\n        address _allowedERC20Address,\\n        address _descartesAddress,\\n        address _loggerAddress\\n    ) {\\n        allowedERC20Address = _allowedERC20Address;\\n        descartes = DescartesInterface(_descartesAddress);\\n        logger = Logger(_loggerAddress);\\n\\n        // stores an empty chunk of data in the logger and records its index\\n        bytes8[] memory emptyData = new bytes8[](1);\\n        bytes32 logHash = logger.calculateMerkleRootFromData(turnChunkLog2Size, emptyData);\\n        emptyDataLogIndex = logger.getLogIndex(logHash);\\n    }\\n\\n    /// @notice Starts a new game\\n    /// @param _gameTemplateHash template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\\n    /// @param _gameMetadata game-specific initial metadata/parameters\\n    /// @param _gameValidators addresses of the validator nodes that will run a Descartes verification should it be needed\\n    /// @param _gameERC20Address address for a ERC20 compatible token provider\\n    /// @param _players addresses of the players involved\\n    /// @param _playerFunds funds/balances that each player is bringing into the game\\n    /// @param _playerInfos game-specific information for each player\\n    /// @return index of the game instance\\n    function startGame(\\n        bytes32 _gameTemplateHash,\\n        bytes memory _gameMetadata,\\n        address[] memory _gameValidators,\\n        address _gameERC20Address,\\n        address[] memory _players,\\n        uint256[] memory _playerFunds,\\n        bytes[] memory _playerInfos\\n    ) public returns (uint256) {\\n        // ensures that the token provider is the allowed one\\n        require(_gameERC20Address == allowedERC20Address, \\\"Unexpected token provider\\\");\\n\\n        // tranfer tokens to game contract\\n        transferTokensToGameAccount(IERC20(_gameERC20Address), msg.sender, _playerFunds);\\n\\n        // creates new context\\n        GameContext storage context = instances[currentIndex];\\n        context.gameTemplateHash = _gameTemplateHash;\\n        context.gameMetadata = _gameMetadata;\\n        context.gameValidators = _gameValidators;\\n        context.gameERC20Address = _gameERC20Address;\\n        context.players = _players;\\n        context.playerFunds = _playerFunds;\\n        context.playerInfos = _playerInfos;\\n\\n        // emits event for new game\\n        emit TurnBasedGameContext.GameReady(currentIndex, context);\\n\\n        active[currentIndex] = true;\\n        return currentIndex++;\\n    }\\n\\n    /// @notice Transfer tokens to the game contract account\\n    /// @param _tokenProvider ERC20 compatible token provider instance\\n    /// @param _holder account from where tokens will be transferred to the game\\n    /// @param _playerFunds amount of tokens from each player\\n    function transferTokensToGameAccount(\\n        IERC20 _tokenProvider,\\n        address _holder,\\n        uint256[] memory _playerFunds\\n    ) public {\\n        uint256 tokensToTransfer;\\n        for (uint256 i = 0; i < _playerFunds.length; i++) {\\n            tokensToTransfer += _playerFunds[i];\\n        }\\n        _tokenProvider.transferFrom(_holder, address(this), tokensToTransfer);\\n    }\\n\\n    /// @notice Returns game context\\n    /// @param _index index identifying the game\\n    /// @return GameContext struct for the specified game\\n    function getContext(uint256 _index) public view onlyInstantiated(_index) returns (GameContext memory) {\\n        return instances[_index];\\n    }\\n\\n    /// @notice Submits a new turn for a given game\\n    /// @param _index index identifying the game\\n    /// @param _turnIndex a sequential number for the turn, which must be equal to the last submitted turn's index + 1\\n    /// @param _data game-specific turn data (array of 64-bit words)\\n    function submitTurn(\\n        uint256 _index,\\n        uint256 _turnIndex,\\n        bytes calldata _data\\n    ) public onlyActive(_index) {\\n        GameContext storage context = instances[_index];\\n        context.submitTurn(_index, _turnIndex, _data, logger, turnChunkLog2Size);\\n    }\\n\\n    /// @notice Challenges game state, triggering a verification by a Descartes computation\\n    /// @param _index index identifying the game\\n    /// @return index of the Descartes computation\\n    function challengeGame(uint256 _index) public onlyActive(_index) returns (uint256) {\\n        GameContext storage context = instances[_index];\\n        return context.challengeGame(_index, descartes, logger, turnChunkLog2Size, emptyDataLogIndex);\\n    }\\n\\n    /// @notice Claims game has ended with the provided result (share of locked funds)\\n    /// @param _index index identifying the game\\n    /// @param _fundsShare result of the game given as a distribution of the funds previously locked\\n    function claimResult(uint256 _index, uint256[] memory _fundsShare) public onlyActive(_index) {\\n        GameContext storage context = instances[_index];\\n        context.claimResult(_index, _fundsShare);\\n    }\\n\\n    /// @notice Confirms game results previously claimed\\n    /// @param _index index identifying the game\\n    function confirmResult(uint256 _index) public onlyActive(_index) {\\n        GameContext storage context = instances[_index];\\n        bool isConsensus = context.confirmResult();\\n        if (isConsensus == true) {\\n            // if all players agree, applies claimed result and ends game\\n            context.applyResult(_index, context.claimedFundsShare);\\n            deactivate(_index);\\n        }\\n    }\\n\\n    /// @notice Applies the result of a game verified by Descartes, transferring funds according to the Descartes computation output\\n    /// @param _index index identifying the game\\n    function applyVerificationResult(uint256 _index) public onlyActive(_index) {\\n        GameContext storage context = instances[_index];\\n        context.applyVerificationResult(_index, descartes);\\n        deactivate(_index);\\n    }\\n\\n    /// @notice Indicates whether a given player is concerned about a game\\n    /// @param _index index identifying the game\\n    /// @param _player a player's address\\n    /// @return true if the player is concerned about the game, false otherwise\\n    function isConcerned(uint256 _index, address _player) public view override onlyInstantiated(_index) returns (bool) {\\n        GameContext storage context = instances[_index];\\n        return context.isConcerned(_player);\\n    }\\n\\n    /// @notice Returns state of the instance for offchain usage concerning given validator.\\n    /// @param _index index identifying the game\\n    /// @return _isDescartesInstantiated whether an offchain Descartes computation has been instantiated for this game\\n    function getState(uint256 _index, address)\\n        public\\n        view\\n        onlyInstantiated(_index)\\n        returns (bool _isDescartesInstantiated)\\n    {\\n        GameContext storage context = instances[_index];\\n        return context.isDescartesInstantiated;\\n    }\\n\\n    /// @notice Retrieves sub-instances of the game (required method for Instantiator, used by offchain dispatcher code).\\n    /// @param _index index identifying the game\\n    function getSubInstances(uint256 _index, address)\\n        public\\n        view\\n        override\\n        onlyInstantiated(_index)\\n        returns (address[] memory _addresses, uint256[] memory _indices)\\n    {\\n        GameContext storage context = instances[_index];\\n        if (context.isDescartesInstantiated) {\\n            // sub-instance is the associated Descartes computation\\n            address[] memory addresses = new address[](1);\\n            uint256[] memory indices = new uint256[](1);\\n            addresses[0] = address(descartes);\\n            indices[0] = context.descartesIndex;\\n            return (addresses, indices);\\n        } else {\\n            // no sub-instances\\n            return (new address[](0), new uint256[](0));\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xea5c53370ec51ee6dd5e77857a7537cde5d6ae53404f01601bf624b22a34aae5\",\"license\":\"Apache-2.0\"},\"contracts/TurnBasedGameContext.sol\":{\"content\":\"// Copyright 2021 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n/// @title TurnBasedGame\\n/// @author Milton Jonathan\\npragma solidity ^0.7.0;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"@openzeppelin/contracts/token/ERC20/ERC20Burnable.sol\\\";\\nimport \\\"@cartesi/descartes-sdk/contracts/DescartesInterface.sol\\\";\\nimport \\\"./TurnBasedGameUtil.sol\\\";\\n\\n// records a player's turn\\nstruct Turn {\\n    // player that submitted the turn\\n    address player;\\n    // timestamp when turn was submitted\\n    uint256 timestamp;\\n    // indices that identify the turn's data stored in the Logger\\n    uint256[] dataLogIndices;\\n}\\n\\n// records information for an instantiated game\\nstruct GameContext {\\n    // template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\\n    bytes32 gameTemplateHash;\\n    // game-specific initial metadata/parameters\\n    bytes gameMetadata;\\n    // validator nodes to be used for descartes computations\\n    address[] gameValidators;\\n    // address for the ERC20 compatible token provider\\n    address gameERC20Address;\\n    // players involved\\n    address[] players;\\n    // player funds locked for the game\\n    uint256[] playerFunds;\\n    // game-specific information per player\\n    bytes[] playerInfos;\\n    // game-specific turns submitted by each user (including initial state)\\n    Turn[] turns;\\n    // indicates whether a descartes computation has been instantiated\\n    bool isDescartesInstantiated;\\n    // associated descartes computation index\\n    uint256 descartesIndex;\\n    // claim data: player who placed claim\\n    address claimer;\\n    // claim data: claimed result represented by a distribution of player funds\\n    uint256[] claimedFundsShare;\\n    // FIXME: either enforce max of 255 players or use a variable-sized Bitmask\\n    // claim data: mask indicating players that agree with the claim\\n    uint256 claimAgreementMask;\\n}\\n\\n// models a turned-based game instance\\nlibrary TurnBasedGameContext {\\n\\n    // events emitted    \\n    event GameReady(uint256 indexed _index, GameContext _context);\\n    event TurnOver(uint256 indexed _index, uint256 indexed _turnIndex, Turn _turn);\\n    event GameResultClaimed(uint256 indexed _index, uint[] _fundsShare, address indexed _author);\\n    event GameChallenged(uint256 indexed _index, uint256 indexed _descartesIndex, address indexed _author);\\n    event GameOver(uint256 indexed _index, uint[] _fundsShare);\\n\\n\\n    /// @notice Submits a new turn for a given game\\n    /// @param _context game context\\n    /// @param _index index identifying the game\\n    /// @param _turnIndex a sequential number for the turn, which must be equal to the last submitted turn's index + 1\\n    /// @param _data game-specific turn data (array of 64-bit words)\\n    /// @param _logger Logger instance used for storing data in the event history\\n    /// @param _turnChunkLog2Size turn data log2size considering 64-bit words (i.e., how many 64-bit words are there in a chunk of turn data)\\n    function submitTurn(\\n        GameContext storage _context,\\n        uint256 _index,\\n        uint256 _turnIndex,\\n        bytes calldata _data,\\n        Logger _logger,\\n        uint8 _turnChunkLog2Size\\n    ) public onlyByPlayer(_context) {\\n        // ensures game is still ongoing\\n        // - result has not been claimed yet\\n        require(_context.claimer == address(0), \\\"Game end has been claimed\\\");\\n        // - game has not been challenged\\n        require(!_context.isDescartesInstantiated, \\\"Game verification in progress\\\");\\n\\n        // ensures tuen submission sequence is correct\\n        require(_turnIndex == _context.turns.length, \\\"Invalid turn submission sequence\\\");\\n\\n        // defines number of required chunks\\n        uint256 chunkSize = 2**_turnChunkLog2Size;\\n        uint256 nChunks = ((_data.length - 1) / chunkSize) + 1;\\n\\n        uint256[] memory logIndices = new uint256[](nChunks);\\n        if (nChunks > 1) {\\n            // build full chunks (all but the last one)\\n            // - these can make use of a single chunkData buffer, because they will be completely overwritten for each chunk\\n            bytes8[] memory chunkData = new bytes8[](chunkSize / 8);\\n            uint256 start = 0;\\n            uint256 end = 0;\\n            for (uint256 i = 0; i < nChunks - 1; i++) {\\n                start = end;\\n                end = start + chunkSize;\\n                TurnBasedGameUtil.bytes2bytes8(_data, start, end, chunkData);\\n                bytes32 logHash = _logger.calculateMerkleRootFromData(_turnChunkLog2Size, chunkData);\\n                logIndices[i] = _logger.getLogIndex(logHash);\\n            }\\n        }\\n        {\\n            // last chunk (probably not full)\\n            uint256 start = (nChunks - 1) * chunkSize;\\n            uint256 end = _data.length;\\n            uint256 lastChunkSize = (end - start - 1) / 8 + 1;\\n            bytes8[] memory chunkData = new bytes8[](lastChunkSize);\\n            TurnBasedGameUtil.bytes2bytes8(_data, start, end, chunkData);\\n            bytes32 logHash = _logger.calculateMerkleRootFromData(_turnChunkLog2Size, chunkData);\\n            logIndices[nChunks - 1] = _logger.getLogIndex(logHash);\\n        }\\n\\n        // instantiates new turn\\n        Turn memory turn = Turn({player: msg.sender, timestamp: block.timestamp, dataLogIndices: logIndices});\\n\\n        // records new turn in the game context\\n        _context.turns.push(turn);\\n\\n        // emits event for new turn\\n        emit TurnOver(_index, _turnIndex, turn);\\n    }\\n\\n    /// @notice Challenges game state, triggering a verification by a Descartes computation\\n    /// @param _context game context\\n    /// @param _index index identifying the game\\n    /// @param _descartes Descartes instance used for triggering verified computations\\n    /// @param _logger Logger instance used for storing data in the event history\\n    /// @param _turnChunkLog2Size turn data log2size considering 64-bit words (i.e., how many 64-bit words are there in a chunk of turn data)\\n    /// @return index of the Descartes computation\\n    function challengeGame(\\n        GameContext storage _context,\\n        uint256 _index,\\n        DescartesInterface _descartes,\\n        Logger _logger,\\n        uint8 _turnChunkLog2Size,\\n        uint256 _emptyDataLogIndex\\n    ) public onlyByPlayer(_context) returns (uint256) {\\n        // ensures Descartes verification is not in progress or has not already been performed\\n        // - a new challenge is allowed if the Descartes computation is inactive or has failed\\n        if (_context.isDescartesInstantiated) {\\n            (bool isResultReady, bool isRunning, , ) = _descartes.getResult(_context.descartesIndex);\\n            if (isRunning == true) {\\n                revert(\\\"Game verification already in progress\\\");\\n            } else if (isResultReady == true) {\\n                revert(\\\"Game verification has already been performed\\\");\\n            } else {\\n                // the Descartes computation has failed: it is not running and there are no results available\\n                // - let's destruct it before allowing a new computation to take place\\n                _descartes.destruct(_context.descartesIndex);\\n            }\\n        }\\n\\n        // builds input drives for the descartes computation\\n        DescartesInterface.Drive[] memory drives =\\n            buildInputDrives(_context, _logger, _turnChunkLog2Size, _emptyDataLogIndex);\\n\\n        // instantiates the computation\\n        _context.descartesIndex = _descartes.instantiate(\\n            1e13, // max cycles allowed\\n            _context.gameTemplateHash, // hash identifying the computation template\\n            0xf000000000000000, // output drive position: 8th drive position after the rootfs, dapp data, and 5 input drives\\n            // FIXME: either enforce max of 4 players or make this variable\\n            10, // output drive size: 1K (should hold awarded amounts for up to 4 players)\\n            51, // round duration\\n            _context.gameValidators, // parties involved in the computation (validator nodes)\\n            drives\\n        );\\n\\n        _context.isDescartesInstantiated = true;\\n\\n        // emits event announcing game end has been claimed and that Descartes verification is underway\\n        emit GameChallenged(_index, _context.descartesIndex, msg.sender);\\n\\n        return _context.descartesIndex;\\n    }\\n\\n    /// @notice Claims game has ended with the provided result (share of locked funds)\\n    /// @param _context game context\\n    /// @param _index index identifying the game\\n    /// @param _fundsShare result of the game given as a distribution of the funds previously locked\\n    function claimResult(\\n        GameContext storage _context,\\n        uint256 _index,\\n        uint256[] memory _fundsShare\\n    ) public onlyByPlayer(_context) {\\n        // reverts if result has already been claimed\\n        require(\\n            _context.claimer == address(0),\\n            \\\"Result has already been claimed for this game: it must now be either confirmed or challenged\\\"\\n        );\\n        // reverts if game verification has been triggered\\n        require(!_context.isDescartesInstantiated, \\\"Game has been challenged and a verification has been requested\\\");\\n\\n        // ensures claimed result is valid\\n        TurnBasedGameUtil.checkResult(_context.playerFunds, _fundsShare);\\n\\n        // stores claimer and claimed result in game context\\n        _context.claimer = msg.sender;\\n        _context.claimedFundsShare = _fundsShare;\\n\\n        // adds claimer to mask indicating players that agree with the claim\\n        _context.claimAgreementMask = TurnBasedGameUtil.updateClaimAgreementMask(\\n            _context.claimAgreementMask,\\n            _context.players,\\n            msg.sender\\n        );\\n\\n        emit GameResultClaimed(_index, _fundsShare, msg.sender);\\n    }\\n\\n    /// @notice Confirms game results previously claimed\\n    /// @param _context game context\\n    /// @return _isConsensus boolean indicating whether all players have agreed with the claim\\n    function confirmResult(GameContext storage _context) public onlyByPlayer(_context) returns (bool _isConsensus) {\\n        // reverts if result has not been claimed yet\\n        require(_context.claimer != address(0), \\\"Result has not been claimed for this game yet\\\");\\n        // reverts if game verification has been triggered\\n        require(!_context.isDescartesInstantiated, \\\"Game has been challenged and a verification has been requested\\\");\\n\\n        // adds confirming player to mask indicating players that agree with the claim\\n        _context.claimAgreementMask = TurnBasedGameUtil.updateClaimAgreementMask(\\n            _context.claimAgreementMask,\\n            _context.players,\\n            msg.sender\\n        );\\n\\n        // checks if all players have agreed with the claim\\n        uint256 consensusMask = (uint256(1) << _context.players.length) - uint256(1);\\n        if (_context.claimAgreementMask == consensusMask) {\\n            return true;\\n        } else {\\n            return false;\\n        }\\n    }\\n\\n    /// @notice Applies the result of a game verified by Descartes, transferring funds according to the Descartes computation output\\n    /// @param _context game context\\n    /// @param _index index identifying the game\\n    /// @param _descartes Descartes instance used for triggering verified computations\\n    function applyVerificationResult(\\n        GameContext storage _context,\\n        uint256 _index,\\n        DescartesInterface _descartes\\n    ) public {\\n        // ensures Descartes computation has been instantiated\\n        require(_context.isDescartesInstantiated, \\\"Game verification has not been requested\\\");\\n\\n        // queries Descartes result\\n        (bool isResultReady, bool isRunning, , bytes memory result) = _descartes.getResult(_context.descartesIndex);\\n\\n        // ensures Descartes computation result is ready\\n        require(!isRunning, \\\"Game verification result has not been computed yet\\\");\\n        require(isResultReady, \\\"Game verification result not available\\\");\\n\\n        // ensures result is valid: needs to have a uint256 value (32 bytes) for each player\\n        require(\\n            result.length >= 32 * _context.players.length,\\n            \\\"Game verification result is invalid: should have one uint256 value for each player\\\"\\n        );\\n\\n        // decodes result bytes as an uint[] representing amount from the locked funds to be transferred to each player\\n        uint256[] memory fundsShare = new uint256[](_context.players.length);\\n        for (uint256 i = 0; i < _context.players.length; i++) {\\n            uint256 fundValue;\\n            assembly {\\n                result := add(result, 0x20)\\n                fundValue := mload(result)\\n            }\\n            fundsShare[i] = fundValue;\\n        }\\n\\n        // applies result and ends game\\n        applyResult(_context, _index, fundsShare);\\n\\n        // descartes computation is over: we can destruct it\\n        _descartes.destruct(_context.descartesIndex);\\n    }\\n\\n    /// @notice Indicates whether a given player is concerned about a game\\n    /// @param _context game context\\n    /// @param _player a player's address\\n    /// @return true if the player is concerned about the game, false otherwise\\n    function isConcerned(GameContext storage _context, address _player) internal view returns (bool) {\\n        // checks if given address belongs to one of the game players\\n        for (uint256 i = 0; i < _context.players.length; i++) {\\n            if (_player == _context.players[i]) {\\n                return true;\\n            }\\n        }\\n\\n        // given address is not involved in the game\\n        return false;\\n    }\\n\\n    /// @notice Applies the results of a game, transferring locked funds according to the provided distribution\\n    /// @param _context game context\\n    /// @param _index index identifying the game\\n    /// @param _fundsShare result of the game given as a distribution of the funds previously locked\\n    function applyResult(\\n        GameContext storage _context,\\n        uint256 _index,\\n        uint256[] memory _fundsShare\\n    ) public {\\n        // ensures provided result is valid\\n        uint256 fundsToBurn = TurnBasedGameUtil.checkResult(_context.playerFunds, _fundsShare);\\n\\n        // transfer funds according to result, and burn remaining funds\\n        resolveFunds(_context, fundsToBurn, _fundsShare);\\n\\n        // deactivates game to prevent further interaction with it\\n        delete _context.players;\\n        delete _context.playerFunds;\\n        delete _context.turns;\\n\\n        // emit event for end of game\\n        emit GameOver(_index, _fundsShare);\\n    }\\n\\n    /// @notice Resolve funds distribution\\n    /// @param _context game context\\n    /// @param _fundsToBurn funds that will be burned as a penalty for the cheater\\n    /// @param _fundsShare result of the game given as a distribution of the funds previously locked\\n    function resolveFunds(\\n        GameContext storage _context,\\n        uint256 _fundsToBurn,\\n        uint256[] memory _fundsShare\\n    ) internal {\\n        ERC20Burnable tokenProvider = ERC20Burnable(_context.gameERC20Address);\\n\\n        // distribute game funds between players according result\\n        for (uint8 i = 0; i < _fundsShare.length; i++) {\\n            address player = _context.players[i];\\n            tokenProvider.transfer(player, _fundsShare[i]);\\n        }\\n\\n        // burn tokens, if necessary\\n        if (_fundsToBurn > 0) {\\n            // Here the account is the game contract because context is a library ;-)\\n            tokenProvider.burn(_fundsToBurn);\\n        }\\n    }\\n\\n    function buildInputDrives(\\n        GameContext storage _context,\\n        Logger _logger,\\n        uint8 _turnChunkLog2Size,\\n        uint256 _emptyDataLogIndex\\n    ) internal returns (DescartesInterface.Drive[] memory) {\\n        // builds input drives for the descartes computation\\n        DescartesInterface.Drive[] memory drives = new DescartesInterface.Drive[](5);\\n\\n        // 1st input drive: game metadata (3rd drive position after rootfs and dapp data)\\n        drives[0] = buildDirectDrive(_context.gameMetadata, 0xa000000000000000);\\n\\n        // 2nd input drive: players data\\n        bytes memory players =\\n            abi.encodePacked(uint32(_context.players.length), _context.players, _context.playerFunds);\\n        drives[1] = buildDirectDrive(players, 0xb000000000000000);\\n\\n        // 3rd input drive: turns metadata\\n        drives[2] = buildTurnsMetadataDrive(_context, _turnChunkLog2Size, 0xc000000000000000);\\n\\n        // 4th input drive: turns data stored in the Logger\\n        drives[3] = buildTurnsDataDrive(_context, _logger, _turnChunkLog2Size, _emptyDataLogIndex, 0xd000000000000000);\\n\\n        // 5th input drive: verification info, specifying the challenger player and, if present, the claimer along with the claimed result\\n        // - this is important so that the Descartes computation can punish a false claimer or challenger accordingly in the resulting funds distribution\\n        bytes memory verificationInfo = abi.encodePacked(msg.sender, _context.claimer, _context.claimedFundsShare);\\n        drives[4] = buildDirectDrive(verificationInfo, 0xe000000000000000);\\n\\n        return drives;\\n    }\\n\\n    /// @notice Builds a Descartes Drive using directly provided data\\n    /// @param _data drive data\\n    /// @param _drivePosition drive position in a 64-bit address space\\n    /// @return _drive the Descartes drive\\n    function buildDirectDrive(bytes memory _data, uint64 _drivePosition)\\n        internal\\n        pure\\n        returns (DescartesInterface.Drive memory _drive)\\n    {\\n        // minimum drive log2size is 5 (one 32-byte word)\\n        uint8 driveLog2Size = 5;\\n        if (_data.length > 32) {\\n            driveLog2Size = TurnBasedGameUtil.getLog2Ceil(_data.length);\\n        }\\n        return\\n            DescartesInterface.Drive(\\n                _drivePosition, // drive position\\n                driveLog2Size, // driveLog2Size\\n                _data, // directValue\\n                \\\"\\\", // loggerIpfsPath (empty)\\n                0x00, // loggerRootHash\\n                address(0), // provider\\n                false, // waitsProvider\\n                false // needsLogger\\n            );\\n    }\\n\\n    /// @notice Builds a Descartes input drive with the metadata from the turns of a given game\\n    /// @param _context game context\\n    /// @param _drivePosition drive position in a 64-bit address space\\n    /// @return _drive the Descartes drive\\n    function buildTurnsMetadataDrive(\\n        GameContext storage _context,\\n        uint8 _turnChunkLog2Size,\\n        uint64 _drivePosition\\n    ) internal view returns (DescartesInterface.Drive memory _drive) {\\n        address[] memory players = new address[](_context.turns.length);\\n        uint256[] memory timestamps = new uint256[](_context.turns.length);\\n        uint256[] memory sizes = new uint256[](_context.turns.length);\\n        for (uint256 i = 0; i < _context.turns.length; i++) {\\n            players[i] = _context.turns[i].player;\\n            timestamps[i] = _context.turns[i].timestamp;\\n            sizes[i] = _context.turns[i].dataLogIndices.length * (2**_turnChunkLog2Size);\\n        }\\n        bytes memory turnsMetadata = abi.encodePacked(uint32(_context.turns.length), players, timestamps, sizes);\\n        return buildDirectDrive(turnsMetadata, _drivePosition);\\n    }\\n\\n    /// @notice Builds a Descartes input drive with the data from the turns of a given game\\n    /// @param _context game context\\n    /// @param _drivePosition drive position in a 64-bit address space\\n    /// @return _drive the Descartes drive\\n    function buildTurnsDataDrive(\\n        GameContext storage _context,\\n        Logger _logger,\\n        uint8 _turnChunkLog2Size,\\n        uint256 _emptyDataLogIndex,\\n        uint64 _drivePosition\\n    ) internal returns (DescartesInterface.Drive memory _drive) {\\n        // computes total number of turn chunk entries\\n        uint256 nTotalChunks = 0;\\n        for (uint256 iTurn = 0; iTurn < _context.turns.length; iTurn++) {\\n            nTotalChunks += _context.turns[iTurn].dataLogIndices.length;\\n        }\\n\\n        // builds \\\"logRoot\\\" logger entry to be used as an input drive with turn data\\n        // - number of composing entries must be a power of 2\\n        // - each entry will correspond to one turn's chunk of data\\n        // - padding is done by adding \\\"empty\\\" entries (repeats log index pointing to empty data)\\n        uint8 logIndicesLengthLog2 = TurnBasedGameUtil.getLog2Ceil(nTotalChunks);\\n        uint64 logIndicesLength = uint64(1) << logIndicesLengthLog2;\\n        uint256[] memory logIndices = new uint256[](logIndicesLength);\\n        uint256 i = 0;\\n        for (uint256 iTurn = 0; iTurn < _context.turns.length; iTurn++) {\\n            uint256[] memory logIndicesTurn = _context.turns[iTurn].dataLogIndices;\\n            for (uint256 iChunk = 0; iChunk < logIndicesTurn.length; iChunk++) {\\n                logIndices[i++] = logIndicesTurn[iChunk];\\n            }\\n        }\\n        while (i < logIndicesLength) {\\n            logIndices[i++] = _emptyDataLogIndex;\\n        }\\n        bytes32 logRoot = _logger.calculateMerkleRootFromHistory(_turnChunkLog2Size, logIndices);\\n\\n        // total log2 size of the data under logRoot, expressed in bytes, is given by:\\n        // - size of each data chunk/entry: turnChunkLog2Size\\n        // - number of chunks/entries: logIndicesLengthLog2\\n        uint8 rootLog2Size = _turnChunkLog2Size + logIndicesLengthLog2;\\n\\n        return\\n            DescartesInterface.Drive(\\n                _drivePosition, // drive position\\n                rootLog2Size, // driveLog2Size\\n                \\\"\\\", // directValue (empty)\\n                \\\"\\\", // loggerIpfsPath (empty)\\n                logRoot, // loggerRootHash\\n                address(0), // provider\\n                false, // waitsProvider\\n                true // needsLogger\\n            );\\n    }\\n\\n    /// @notice Allows calls only from participating players\\n    /// @param _context game context\\n    modifier onlyByPlayer(GameContext storage _context) {\\n        require(isConcerned(_context, msg.sender), \\\"Player is not participating in the game\\\");\\n        _;\\n    }\\n}\\n\",\"keccak256\":\"0x38ef172290683c32299358ff741f28d01ba67762a63396220ed2969736ea6227\",\"license\":\"Apache-2.0\"},\"contracts/TurnBasedGameLobby.sol\":{\"content\":\"// Copyright 2021 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n/// @title TurnBasedGameLobby\\n/// @author Milton Jonathan\\npragma solidity ^0.7.0;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport \\\"./TurnBasedGame.sol\\\";\\n\\n/// @title TurnBasedGameLobby\\n/// @notice Entry point for players to join games handled by the TurnBasedGame contract\\ncontract TurnBasedGameLobby {\\n    // max number of tokens\\n    uint256 public constant MAX_TOKEN_AMOUNT = type(uint256).max;\\n\\n    // address for the allowed token provider\\n    address allowedERC20Address;\\n\\n    // TurnBasedGame contract used for starting games\\n    TurnBasedGame turnBasedGame;\\n\\n    // records queue information\\n    struct QueuedPlayer {\\n        address addr;\\n        uint256 funds;\\n        bytes info;\\n    }\\n    mapping(bytes32 => QueuedPlayer[]) internal queues;\\n\\n    /// @notice Constructor\\n    /// @param _allowedERC20Address address of the ERC20 compatible token provider\\n    /// @param _turnBasedGameAddress address of the TurnBasedGame contract used for starting games\\n    constructor(address _allowedERC20Address, address _turnBasedGameAddress) {\\n        allowedERC20Address = _allowedERC20Address;\\n        turnBasedGame = TurnBasedGame(_turnBasedGameAddress);\\n        // approve game contract to spend tokens on behalf of lobby\\n        IERC20 tokenContract = IERC20(allowedERC20Address);\\n        tokenContract.approve(_turnBasedGameAddress, MAX_TOKEN_AMOUNT);\\n    }\\n\\n    /// @notice Retrieves the current queue for a given game (specified by its template hash, metadata and number of players)\\n    /// @param _gameTemplateHash template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\\n    /// @param _gameMetadata game-specific initial metadata/parameters\\n    /// @param _gameValidators addresses of the validator nodes that will run a Descartes verification should it be needed\\n    /// @param _gameNumPlayers number of players in the game\\n    /// @param _gameMinFunds minimum funds required to be staked in order to join the game\\n    /// @param _gameERC20Address address for a ERC20 compatible token provider\\n    /// @return array of QueuedPlayer structs representing the currently enqueued players for the specified game\\n    function getQueue(\\n        bytes32 _gameTemplateHash,\\n        bytes memory _gameMetadata,\\n        address[] memory _gameValidators,\\n        uint8 _gameNumPlayers,\\n        uint256 _gameMinFunds,\\n        address _gameERC20Address\\n    ) public view returns (QueuedPlayer[] memory) {\\n        // builds hash for game specification\\n        bytes32 queueHash =\\n            keccak256(\\n                abi.encodePacked(\\n                    _gameTemplateHash,\\n                    _gameMetadata,\\n                    _gameValidators,\\n                    _gameNumPlayers,\\n                    _gameMinFunds,\\n                    _gameERC20Address\\n                )\\n            );\\n        // retrieves queued players for given game specification\\n        return queues[queueHash];\\n    }\\n\\n    /// @notice Allows a player to join a game. People are queued up as they join and the game starts when enough people are available.\\n    /// @param _gameTemplateHash template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)\\n    /// @param _gameMetadata game-specific initial metadata/parameters\\n    /// @param _gameValidators addresses of the validator nodes that will run a Descartes verification should it be needed\\n    /// @param _gameNumPlayers number of players in the game\\n    /// @param _gameMinFunds minimum funds required to be staked in order to join the game\\n    /// @param _gameERC20Address address for a ERC20 compatible token provider\\n    /// @param _playerFunds amount being staked by the player joining the game\\n    /// @param _playerInfo game-specific information for the player joining the game\\n    function joinGame(\\n        bytes32 _gameTemplateHash,\\n        bytes memory _gameMetadata,\\n        address[] memory _gameValidators,\\n        uint8 _gameNumPlayers,\\n        uint256 _gameMinFunds,\\n        address _gameERC20Address,\\n        uint256 _playerFunds,\\n        bytes memory _playerInfo\\n    ) public {\\n        // ensures player is staking enough funds to participate in the game\\n        require(_playerFunds >= _gameMinFunds, \\\"Player's staked funds is insufficient to join the game\\\");\\n        // ensures that the token provider is the allowed one\\n        require(_gameERC20Address == allowedERC20Address, \\\"Unexpected token provider\\\");\\n\\n        // builds hash for game specification\\n        bytes32 queueHash =\\n            keccak256(\\n                abi.encodePacked(\\n                    _gameTemplateHash,\\n                    _gameMetadata,\\n                    _gameValidators,\\n                    _gameNumPlayers,\\n                    _gameMinFunds,\\n                    _gameERC20Address\\n                )\\n            );\\n\\n        // retrieves queued players for given game specification\\n        QueuedPlayer[] storage queuedPlayers = queues[queueHash];\\n\\n        // reverts if player is already in the queue\\n        for (uint256 i = 0; i < queuedPlayers.length; i++) {\\n            require(queuedPlayers[i].addr != msg.sender, \\\"Player has already been enqueued to join this game\\\");\\n        }\\n\\n        // lock player tokens in the lobby\\n        lockFunds(IERC20(_gameERC20Address), msg.sender, _playerFunds);\\n\\n        if (queuedPlayers.length < _gameNumPlayers - 1) {\\n            // not enough players queued yet, so we simply add this new one to the queue\\n            QueuedPlayer memory newPlayer;\\n            newPlayer.addr = msg.sender;\\n            newPlayer.funds = _playerFunds;\\n            newPlayer.info = _playerInfo;\\n            queuedPlayers.push(newPlayer);\\n        } else {\\n            // enough players are already queued: we can start a game\\n            // - collects previously queued players\\n            address[] memory players = new address[](_gameNumPlayers);\\n            uint256[] memory playerFunds = new uint256[](_gameNumPlayers);\\n            bytes[] memory playerInfos = new bytes[](_gameNumPlayers);\\n            for (uint256 i = 0; i < _gameNumPlayers - 1; i++) {\\n                players[i] = queuedPlayers[i].addr;\\n                playerFunds[i] = queuedPlayers[i].funds;\\n                playerInfos[i] = queuedPlayers[i].info;\\n            }\\n\\n            // - adds new player\\n            players[_gameNumPlayers - 1] = msg.sender;\\n            playerFunds[_gameNumPlayers - 1] = _playerFunds;\\n            playerInfos[_gameNumPlayers - 1] = _playerInfo;\\n\\n            // - starts game\\n            turnBasedGame.startGame(\\n                _gameTemplateHash,\\n                _gameMetadata,\\n                _gameValidators,\\n                _gameERC20Address,\\n                players,\\n                playerFunds,\\n                playerInfos\\n            );\\n            // clears up queue\\n            delete queues[queueHash];\\n        }\\n    }\\n\\n    /// @notice Lock player tokens in the lobby contract until the game start\\n    /// @param _tokenProvider ERC20 compatible token provider instance\\n    /// @param _playerAddress address for the player whose tokens will be locked in lobby account\\n    /// @param _playerFunds amount being staked by the player joining the game\\n    function lockFunds(\\n        IERC20 _tokenProvider,\\n        address _playerAddress,\\n        uint256 _playerFunds\\n    ) public {\\n        _tokenProvider.transferFrom(_playerAddress, address(this), _playerFunds);\\n    }\\n}\\n\",\"keccak256\":\"0x2048b89a7932ed3610f77f6788ecef3a880aea8863c68a865806523a363412e2\",\"license\":\"Apache-2.0\"},\"contracts/TurnBasedGameUtil.sol\":{\"content\":\"// Copyright 2021 Cartesi Pte. Ltd.\\n\\n// SPDX-License-Identifier: Apache-2.0\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use\\n// this file except in compliance with the License. You may obtain a copy of the\\n// License at http://www.apache.org/licenses/LICENSE-2.0\\n\\n// Unless required by applicable law or agreed to in writing, software distributed\\n// under the License is distributed on an \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR\\n// CONDITIONS OF ANY KIND, either express or implied. See the License for the\\n// specific language governing permissions and limitations under the License.\\n\\n/// @title TurnBasedGameUtil\\n/// @author Milton Jonathan\\npragma solidity ^0.7.0;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"@cartesi/descartes-sdk/contracts/DescartesInterface.sol\\\";\\nimport \\\"@cartesi/logger/contracts/Logger.sol\\\";\\nimport \\\"@cartesi/util/contracts/InstantiatorImpl.sol\\\";\\n\\n/// @title TurnBasedGameUtil\\n/// @notice Library with utility methods used by the TurnBasedGame contract\\nlibrary TurnBasedGameUtil {\\n\\n    /// @notice Calculates the ceiling of the log2 of the provided number\\n    /// @param _number input number to use for the calculation\\n    /// @return the log2 ceiling result, where getLog2Ceil(0) = 0, getLog2Ceil(1) = 1, getLog2Ceil(2) = 1, etc.\\n    function getLog2Ceil(uint256 _number) internal pure\\n        returns (uint8)\\n    {\\n        uint8 result = 0;\\n        \\n        uint256 checkNumber = _number;\\n        bool notPowerOf2 = ((checkNumber & 1) == 1);\\n\\n        checkNumber = checkNumber >> 1;\\n        while (checkNumber > 0) {\\n            ++result;\\n            if (checkNumber != 1 && (checkNumber & 1) == 1) {\\n                notPowerOf2 = true;\\n            }\\n            checkNumber = checkNumber >> 1;\\n        }\\n\\n        if (notPowerOf2) {\\n            ++result;\\n        }\\n        return result;\\n    }\\n\\n\\n    /// @notice Converts a given bytes data array into an array of bytes8 entries\\n    /// @param _data bytes data array to be converted\\n    /// @param _start start index of the portion of the data array to be converted\\n    /// @param _end end index of the portion of the data array to be converted\\n    /// @param _output output bytes8 array previously allocated for storing the result\\n    function bytes2bytes8(bytes calldata _data, uint _start, uint _end, bytes8[] memory _output) internal pure {\\n        require(_end > _start, \\\"end index should be larger than start\\\");\\n        require(_start >= 0 && _start < _data.length, \\\"start index out of bounds\\\");\\n        require(_end > 0 && _end <= _data.length, \\\"end index out of bounds\\\");\\n\\n        uint length = _end - _start;\\n        uint nBytes8 = (length - 1)/8 + 1;\\n        uint nBytes32 = (length - 1)/32 + 1;\\n        uint paddingBits = (nBytes8*8 - length)*8;\\n\\n        require(_output.length >= nBytes8, \\\"output buffer is not large enough to hold result\\\");\\n\\n        bytes memory ptr = _data;\\n        assembly {\\n            ptr := add(ptr, _start)\\n        }        \\n        for (uint i = 0; i < nBytes32-1; i++) {\\n            // full word entries\\n            bytes32 value;\\n            assembly {\\n              ptr := add(ptr, 0x20)\\n              value := mload(ptr)\\n            }        \\n            _output[i*4 + 0] = bytes8(value);\\n            _output[i*4 + 1] = bytes8(value << 64);\\n            _output[i*4 + 2] = bytes8(value << 128);\\n            _output[i*4 + 3] = bytes8(value << 192);\\n        }\\n        {\\n            // last word (may be partially used)\\n            bytes32 value;\\n            assembly {\\n              ptr := add(ptr, 0x20)\\n              value := mload(ptr)\\n            }\\n            // full 8-byte entries of last word\\n            for (uint i = (nBytes32-1)*4; i < nBytes8 - 1; i++) {\\n                _output[i] = bytes8(value);\\n                value = value << 64;\\n            }\\n            // last 8-byte entry (may be partial)\\n            // - pads last value to chop out unrequested bytes\\n            bytes8 valueBytes8 = (bytes8(value) >> paddingBits) << paddingBits;\\n            _output[nBytes8-1] = valueBytes8;\\n        }\\n    }    \\n\\n\\n    /// @notice Ensures a given result is acceptable considering the player funds locked for the game\\n    /// @param _playerFunds funds originally submitted by the players\\n    /// @param _fundsShare result of the game given as a distribution of the funds previously locked\\n    /// @return _fundsToBurn the amount of funds to burn as a result of some of the locked funds not being distributed to any player\\n    function checkResult(uint[] memory _playerFunds, uint[] memory _fundsShare) internal pure\\n        returns (uint _fundsToBurn)\\n    {\\n        require(_playerFunds.length == _fundsShare.length, \\\"Resulting funds distribution does not match number of players in the game\\\");\\n\\n        // computes total funds submitted by the players and total funds distributed\\n        uint totalPlayerFunds = 0;\\n        uint totalFundsShare = 0;\\n        for (uint i = 0; i < _playerFunds.length; i++) {\\n            totalPlayerFunds += _playerFunds[i];\\n            totalFundsShare += _fundsShare[i];\\n        }\\n        require(totalPlayerFunds >= totalFundsShare, \\\"Resulting funds distribution exceeds amount locked by the players for the game\\\");\\n\\n        // amount to burn corresponds to the difference between total original player funds and resulting distribution\\n        return totalPlayerFunds - totalFundsShare;\\n    }\\n\\n    /// @notice Updates mask indicating players that agree with the claim\\n    /// @param _claimAgreementMask current agreement mask, where the i-th bit indicates if player i has agreed\\n    /// @param _players array with addresses of involved parties\\n    /// @param _agreeingPlayer address of the party that has now indicated agreement\\n    /// @return updated claim agreement mask\\n    function updateClaimAgreementMask(uint256 _claimAgreementMask, address[] memory _players, address _agreeingPlayer) internal pure\\n        returns (uint256)\\n    {\\n        for (uint i = 0; i < _players.length; i++) {\\n            if (_agreeingPlayer == _players[i]) {\\n                _claimAgreementMask = (_claimAgreementMask | (uint256(1) << i));\\n                break;\\n            }\\n        }\\n        return _claimAgreementMask;\\n    }\\n\\n}\\n\",\"keccak256\":\"0x11130a5ea26db192b1c9c05feab5cdbceb47cd55f976c254134748cdd8cd456c\",\"license\":\"Apache-2.0\"}},\"version\":1}",
  "bytecode": "0x60806040523480156200001157600080fd5b5060405162001d5938038062001d598339818101604052810190620000379190620001c9565b816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508073ffffffffffffffffffffffffffffffffffffffff1663095ea7b3837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6040518363ffffffff1660e01b81526004016200013b92919062000258565b602060405180830381600087803b1580156200015657600080fd5b505af11580156200016b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200019191906200020a565b5050505062000303565b600081519050620001ac81620002cf565b92915050565b600081519050620001c381620002e9565b92915050565b60008060408385031215620001dd57600080fd5b6000620001ed858286016200019b565b925050602062000200858286016200019b565b9150509250929050565b6000602082840312156200021d57600080fd5b60006200022d84828501620001b2565b91505092915050565b620002418162000285565b82525050565b6200025281620002c5565b82525050565b60006040820190506200026f600083018562000236565b6200027e602083018462000247565b9392505050565b60006200029282620002a5565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b620002da8162000285565b8114620002e657600080fd5b50565b620002f48162000299565b81146200030057600080fd5b50565b611a4680620003136000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c80631e9c2d67146100515780635dfe785f1461006f578063a94d24151461008b578063e45ea5f6146100a7575b600080fd5b6100596100d7565b604051610066919061167c565b60405180910390f35b61008960048036038101906100849190610e2e565b6100fb565b005b6100a560048036038101906100a09190610f28565b6107fa565b005b6100c160048036038101906100bc9190610d75565b61088f565b6040516100ce9190611568565b60405180910390f35b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81565b8382101561013e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101359061165c565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16146101cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101c39061161c565b60405180910390fd5b60008888888888886040516020016101e9969594939291906114c9565b604051602081830303815290604052805190602001209050600060026000838152602001908152602001600020905060005b81805490508110156102e0573373ffffffffffffffffffffffffffffffffffffffff1682828154811061024a57fe5b906000526020600020906003020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156102d3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102ca9061163c565b60405180910390fd5b808060010191505061021b565b506102ec8533866107fa565b6001870360ff16818054905010156103f257610306610a3e565b33816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050848160200181815250508381604001819052508181908060018154018082558091505060019003906000526020600020906003020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020190805190602001906103e9929190610a75565b505050506107ee565b60608760ff1667ffffffffffffffff8111801561040e57600080fd5b5060405190808252806020026020018201604052801561043d5781602001602082028036833780820191505090505b50905060608860ff1667ffffffffffffffff8111801561045c57600080fd5b5060405190808252806020026020018201604052801561048b5781602001602082028036833780820191505090505b50905060608960ff1667ffffffffffffffff811180156104aa57600080fd5b506040519080825280602002602001820160405280156104de57816020015b60608152602001906001900390816104c95790505b50905060005b60018b0360ff16811015610686578481815481106104fe57fe5b906000526020600020906003020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684828151811061053c57fe5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505084818154811061058257fe5b9060005260206000209060030201600101548382815181106105a057fe5b6020026020010181815250508481815481106105b857fe5b90600052602060002090600302016002018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561065d5780601f106106325761010080835404028352916020019161065d565b820191906000526020600020905b81548152906001019060200180831161064057829003601f168201915b505050505082828151811061066e57fe5b602002602001018190525080806001019150506104e4565b50338360018c0360ff168151811061069a57fe5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050868260018c0360ff16815181106106e757fe5b602002602001018181525050858160018c0360ff168151811061070657fe5b6020026020010181905250600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e831dc388e8e8e8c8888886040518863ffffffff1660e01b8152600401610778979695949392919061158a565b602060405180830381600087803b15801561079257600080fd5b505af11580156107a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107ca9190610f77565b506002600086815260200190815260200160002060006107ea9190610b03565b5050505b50505050505050505050565b8273ffffffffffffffffffffffffffffffffffffffff166323b872dd8330846040518463ffffffff1660e01b815260040161083793929190611531565b602060405180830381600087803b15801561085157600080fd5b505af1158015610865573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108899190610d4c565b50505050565b606060008787878787876040516020016108ae969594939291906114c9565b60405160208183030381529060405280519060200120905060026000828152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b82821015610a2d57838290600052602060002090600302016040518060600160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201548152602001600282018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a155780601f106109ea57610100808354040283529160200191610a15565b820191906000526020600020905b8154815290600101906020018083116109f857829003601f168201915b505050505081525050815260200190600101906108f9565b505050509150509695505050505050565b6040518060600160405280600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001606081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282610aab5760008555610af2565b82601f10610ac457805160ff1916838001178555610af2565b82800160010185558215610af2579182015b82811115610af1578251825591602001919060010190610ad6565b5b509050610aff9190610b27565b5090565b5080546000825560030290600052602060002090810190610b249190610b44565b50565b5b80821115610b40576000816000905550600101610b28565b5090565b5b80821115610b9657600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160009055600282016000610b8d9190610b9a565b50600301610b45565b5090565b50805460018160011615610100020316600290046000825580601f10610bc05750610bdf565b601f016020900490600052602060002090810190610bde9190610b27565b5b50565b600081359050610bf181611986565b92915050565b600082601f830112610c0857600080fd5b8135610c1b610c16826116c8565b611697565b91508181835260208401935060208101905083856020840282011115610c4057600080fd5b60005b83811015610c705781610c568882610be2565b845260208401935060208301925050600181019050610c43565b5050505092915050565b600081519050610c898161199d565b92915050565b600081359050610c9e816119b4565b92915050565b600082601f830112610cb557600080fd5b8135610cc8610cc3826116f4565b611697565b91508082526020830160208301858383011115610ce457600080fd5b610cef8382846118cd565b50505092915050565b600081359050610d07816119cb565b92915050565b600081359050610d1c816119e2565b92915050565b600081519050610d31816119e2565b92915050565b600081359050610d46816119f9565b92915050565b600060208284031215610d5e57600080fd5b6000610d6c84828501610c7a565b91505092915050565b60008060008060008060c08789031215610d8e57600080fd5b6000610d9c89828a01610c8f565b965050602087013567ffffffffffffffff811115610db957600080fd5b610dc589828a01610ca4565b955050604087013567ffffffffffffffff811115610de257600080fd5b610dee89828a01610bf7565b9450506060610dff89828a01610d37565b9350506080610e1089828a01610d0d565b92505060a0610e2189828a01610be2565b9150509295509295509295565b600080600080600080600080610100898b031215610e4b57600080fd5b6000610e598b828c01610c8f565b985050602089013567ffffffffffffffff811115610e7657600080fd5b610e828b828c01610ca4565b975050604089013567ffffffffffffffff811115610e9f57600080fd5b610eab8b828c01610bf7565b9650506060610ebc8b828c01610d37565b9550506080610ecd8b828c01610d0d565b94505060a0610ede8b828c01610be2565b93505060c0610eef8b828c01610d0d565b92505060e089013567ffffffffffffffff811115610f0c57600080fd5b610f188b828c01610ca4565b9150509295985092959890939650565b600080600060608486031215610f3d57600080fd5b6000610f4b86828701610cf8565b9350506020610f5c86828701610be2565b9250506040610f6d86828701610d0d565b9150509250925092565b600060208284031215610f8957600080fd5b6000610f9784828501610d22565b91505092915050565b6000610fac8383611010565b60208301905092915050565b6000610fc4838361102e565b60208301905092915050565b6000610fdc838361127e565b905092915050565b6000610ff0838361142d565b905092915050565b6000611004838361147d565b60208301905092915050565b6110198161185c565b82525050565b6110288161185c565b82525050565b6110378161185c565b82525050565b61104e6110498261185c565b61190f565b82525050565b600061105f82611764565b61106981856117cf565b935061107483611724565b8060005b838110156110a557815161108c8882610fa0565b97506110978361179b565b925050600181019050611078565b5085935050505092915050565b60006110bd82611764565b6110c781856117e0565b93506110d283611724565b8060005b838110156111035781516110ea8882610fb8565b97506110f58361179b565b9250506001810190506110d6565b5085935050505092915050565b600061111b8261176f565b61112581856117eb565b93508360208202850161113785611734565b8060005b8581101561117357848403895281516111548582610fd0565b945061115f836117a8565b925060208a0199505060018101905061113b565b50829750879550505050505092915050565b60006111908261177a565b61119a81856117fc565b9350836020820285016111ac85611744565b8060005b858110156111e857848403895281516111c98582610fe4565b94506111d4836117b5565b925060208a019950506001810190506111b0565b50829750879550505050505092915050565b600061120582611785565b61120f818561180d565b935061121a83611754565b8060005b8381101561124b5781516112328882610ff8565b975061123d836117c2565b92505060018101905061121e565b5085935050505092915050565b6112618161187a565b82525050565b6112786112738261187a565b611921565b82525050565b600061128982611790565b611293818561181e565b93506112a38185602086016118dc565b6112ac8161195b565b840191505092915050565b60006112c282611790565b6112cc818561182f565b93506112dc8185602086016118dc565b6112e58161195b565b840191505092915050565b60006112fb82611790565b6113058185611840565b93506113158185602086016118dc565b80840191505092915050565b600061132e60198361184b565b91507f556e657870656374656420746f6b656e2070726f7669646572000000000000006000830152602082019050919050565b600061136e60328361184b565b91507f506c617965722068617320616c7265616479206265656e20656e71756575656460008301527f20746f206a6f696e20746869732067616d6500000000000000000000000000006020830152604082019050919050565b60006113d460368361184b565b91507f506c617965722773207374616b65642066756e647320697320696e737566666960008301527f6369656e7420746f206a6f696e207468652067616d65000000000000000000006020830152604082019050919050565b60006060830160008301516114456000860182611010565b506020830151611458602086018261147d565b5060408301518482036040860152611470828261127e565b9150508091505092915050565b611486816118b6565b82525050565b611495816118b6565b82525050565b6114ac6114a7826118b6565b61193d565b82525050565b6114c36114be826118c0565b611947565b82525050565b60006114d58289611267565b6020820191506114e582886112f0565b91506114f182876110b2565b91506114fd82866114b2565b60018201915061150d828561149b565b60208201915061151d828461103d565b601482019150819050979650505050505050565b6000606082019050611546600083018661101f565b611553602083018561101f565b611560604083018461148c565b949350505050565b600060208201905081810360008301526115828184611185565b905092915050565b600060e08201905061159f600083018a611258565b81810360208301526115b181896112b7565b905081810360408301526115c58188611054565b90506115d4606083018761101f565b81810360808301526115e68186611054565b905081810360a08301526115fa81856111fa565b905081810360c083015261160e8184611110565b905098975050505050505050565b6000602082019050818103600083015261163581611321565b9050919050565b6000602082019050818103600083015261165581611361565b9050919050565b60006020820190508181036000830152611675816113c7565b9050919050565b6000602082019050611691600083018461148c565b92915050565b6000604051905081810181811067ffffffffffffffff821117156116be576116bd611959565b5b8060405250919050565b600067ffffffffffffffff8211156116e3576116e2611959565b5b602082029050602081019050919050565b600067ffffffffffffffff82111561170f5761170e611959565b5b601f19601f8301169050602081019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b600081519050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600061186782611896565b9050919050565b60008115159050919050565b6000819050919050565b600061188f8261185c565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b838110156118fa5780820151818401526020810190506118df565b83811115611909576000848401525b50505050565b600061191a8261192b565b9050919050565b6000819050919050565b600061193682611979565b9050919050565b6000819050919050565b60006119528261196c565b9050919050565bfe5b6000601f19601f8301169050919050565b60008160f81b9050919050565b60008160601b9050919050565b61198f8161185c565b811461199a57600080fd5b50565b6119a68161186e565b81146119b157600080fd5b50565b6119bd8161187a565b81146119c857600080fd5b50565b6119d481611884565b81146119df57600080fd5b50565b6119eb816118b6565b81146119f657600080fd5b50565b611a02816118c0565b8114611a0d57600080fd5b5056fea26469706673582212208b95e7c13f1e1dacb71273201be1ac2ca659d090b9a9f13ca5589684a4eac29364736f6c63430007040033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061004c5760003560e01c80631e9c2d67146100515780635dfe785f1461006f578063a94d24151461008b578063e45ea5f6146100a7575b600080fd5b6100596100d7565b604051610066919061167c565b60405180910390f35b61008960048036038101906100849190610e2e565b6100fb565b005b6100a560048036038101906100a09190610f28565b6107fa565b005b6100c160048036038101906100bc9190610d75565b61088f565b6040516100ce9190611568565b60405180910390f35b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81565b8382101561013e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101359061165c565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16146101cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101c39061161c565b60405180910390fd5b60008888888888886040516020016101e9969594939291906114c9565b604051602081830303815290604052805190602001209050600060026000838152602001908152602001600020905060005b81805490508110156102e0573373ffffffffffffffffffffffffffffffffffffffff1682828154811061024a57fe5b906000526020600020906003020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156102d3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102ca9061163c565b60405180910390fd5b808060010191505061021b565b506102ec8533866107fa565b6001870360ff16818054905010156103f257610306610a3e565b33816000019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050848160200181815250508381604001819052508181908060018154018082558091505060019003906000526020600020906003020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020190805190602001906103e9929190610a75565b505050506107ee565b60608760ff1667ffffffffffffffff8111801561040e57600080fd5b5060405190808252806020026020018201604052801561043d5781602001602082028036833780820191505090505b50905060608860ff1667ffffffffffffffff8111801561045c57600080fd5b5060405190808252806020026020018201604052801561048b5781602001602082028036833780820191505090505b50905060608960ff1667ffffffffffffffff811180156104aa57600080fd5b506040519080825280602002602001820160405280156104de57816020015b60608152602001906001900390816104c95790505b50905060005b60018b0360ff16811015610686578481815481106104fe57fe5b906000526020600020906003020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684828151811061053c57fe5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505084818154811061058257fe5b9060005260206000209060030201600101548382815181106105a057fe5b6020026020010181815250508481815481106105b857fe5b90600052602060002090600302016002018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561065d5780601f106106325761010080835404028352916020019161065d565b820191906000526020600020905b81548152906001019060200180831161064057829003601f168201915b505050505082828151811061066e57fe5b602002602001018190525080806001019150506104e4565b50338360018c0360ff168151811061069a57fe5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050868260018c0360ff16815181106106e757fe5b602002602001018181525050858160018c0360ff168151811061070657fe5b6020026020010181905250600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e831dc388e8e8e8c8888886040518863ffffffff1660e01b8152600401610778979695949392919061158a565b602060405180830381600087803b15801561079257600080fd5b505af11580156107a6573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107ca9190610f77565b506002600086815260200190815260200160002060006107ea9190610b03565b5050505b50505050505050505050565b8273ffffffffffffffffffffffffffffffffffffffff166323b872dd8330846040518463ffffffff1660e01b815260040161083793929190611531565b602060405180830381600087803b15801561085157600080fd5b505af1158015610865573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108899190610d4c565b50505050565b606060008787878787876040516020016108ae969594939291906114c9565b60405160208183030381529060405280519060200120905060026000828152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b82821015610a2d57838290600052602060002090600302016040518060600160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200160018201548152602001600282018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a155780601f106109ea57610100808354040283529160200191610a15565b820191906000526020600020905b8154815290600101906020018083116109f857829003601f168201915b505050505081525050815260200190600101906108f9565b505050509150509695505050505050565b6040518060600160405280600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001606081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282610aab5760008555610af2565b82601f10610ac457805160ff1916838001178555610af2565b82800160010185558215610af2579182015b82811115610af1578251825591602001919060010190610ad6565b5b509050610aff9190610b27565b5090565b5080546000825560030290600052602060002090810190610b249190610b44565b50565b5b80821115610b40576000816000905550600101610b28565b5090565b5b80821115610b9657600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160009055600282016000610b8d9190610b9a565b50600301610b45565b5090565b50805460018160011615610100020316600290046000825580601f10610bc05750610bdf565b601f016020900490600052602060002090810190610bde9190610b27565b5b50565b600081359050610bf181611986565b92915050565b600082601f830112610c0857600080fd5b8135610c1b610c16826116c8565b611697565b91508181835260208401935060208101905083856020840282011115610c4057600080fd5b60005b83811015610c705781610c568882610be2565b845260208401935060208301925050600181019050610c43565b5050505092915050565b600081519050610c898161199d565b92915050565b600081359050610c9e816119b4565b92915050565b600082601f830112610cb557600080fd5b8135610cc8610cc3826116f4565b611697565b91508082526020830160208301858383011115610ce457600080fd5b610cef8382846118cd565b50505092915050565b600081359050610d07816119cb565b92915050565b600081359050610d1c816119e2565b92915050565b600081519050610d31816119e2565b92915050565b600081359050610d46816119f9565b92915050565b600060208284031215610d5e57600080fd5b6000610d6c84828501610c7a565b91505092915050565b60008060008060008060c08789031215610d8e57600080fd5b6000610d9c89828a01610c8f565b965050602087013567ffffffffffffffff811115610db957600080fd5b610dc589828a01610ca4565b955050604087013567ffffffffffffffff811115610de257600080fd5b610dee89828a01610bf7565b9450506060610dff89828a01610d37565b9350506080610e1089828a01610d0d565b92505060a0610e2189828a01610be2565b9150509295509295509295565b600080600080600080600080610100898b031215610e4b57600080fd5b6000610e598b828c01610c8f565b985050602089013567ffffffffffffffff811115610e7657600080fd5b610e828b828c01610ca4565b975050604089013567ffffffffffffffff811115610e9f57600080fd5b610eab8b828c01610bf7565b9650506060610ebc8b828c01610d37565b9550506080610ecd8b828c01610d0d565b94505060a0610ede8b828c01610be2565b93505060c0610eef8b828c01610d0d565b92505060e089013567ffffffffffffffff811115610f0c57600080fd5b610f188b828c01610ca4565b9150509295985092959890939650565b600080600060608486031215610f3d57600080fd5b6000610f4b86828701610cf8565b9350506020610f5c86828701610be2565b9250506040610f6d86828701610d0d565b9150509250925092565b600060208284031215610f8957600080fd5b6000610f9784828501610d22565b91505092915050565b6000610fac8383611010565b60208301905092915050565b6000610fc4838361102e565b60208301905092915050565b6000610fdc838361127e565b905092915050565b6000610ff0838361142d565b905092915050565b6000611004838361147d565b60208301905092915050565b6110198161185c565b82525050565b6110288161185c565b82525050565b6110378161185c565b82525050565b61104e6110498261185c565b61190f565b82525050565b600061105f82611764565b61106981856117cf565b935061107483611724565b8060005b838110156110a557815161108c8882610fa0565b97506110978361179b565b925050600181019050611078565b5085935050505092915050565b60006110bd82611764565b6110c781856117e0565b93506110d283611724565b8060005b838110156111035781516110ea8882610fb8565b97506110f58361179b565b9250506001810190506110d6565b5085935050505092915050565b600061111b8261176f565b61112581856117eb565b93508360208202850161113785611734565b8060005b8581101561117357848403895281516111548582610fd0565b945061115f836117a8565b925060208a0199505060018101905061113b565b50829750879550505050505092915050565b60006111908261177a565b61119a81856117fc565b9350836020820285016111ac85611744565b8060005b858110156111e857848403895281516111c98582610fe4565b94506111d4836117b5565b925060208a019950506001810190506111b0565b50829750879550505050505092915050565b600061120582611785565b61120f818561180d565b935061121a83611754565b8060005b8381101561124b5781516112328882610ff8565b975061123d836117c2565b92505060018101905061121e565b5085935050505092915050565b6112618161187a565b82525050565b6112786112738261187a565b611921565b82525050565b600061128982611790565b611293818561181e565b93506112a38185602086016118dc565b6112ac8161195b565b840191505092915050565b60006112c282611790565b6112cc818561182f565b93506112dc8185602086016118dc565b6112e58161195b565b840191505092915050565b60006112fb82611790565b6113058185611840565b93506113158185602086016118dc565b80840191505092915050565b600061132e60198361184b565b91507f556e657870656374656420746f6b656e2070726f7669646572000000000000006000830152602082019050919050565b600061136e60328361184b565b91507f506c617965722068617320616c7265616479206265656e20656e71756575656460008301527f20746f206a6f696e20746869732067616d6500000000000000000000000000006020830152604082019050919050565b60006113d460368361184b565b91507f506c617965722773207374616b65642066756e647320697320696e737566666960008301527f6369656e7420746f206a6f696e207468652067616d65000000000000000000006020830152604082019050919050565b60006060830160008301516114456000860182611010565b506020830151611458602086018261147d565b5060408301518482036040860152611470828261127e565b9150508091505092915050565b611486816118b6565b82525050565b611495816118b6565b82525050565b6114ac6114a7826118b6565b61193d565b82525050565b6114c36114be826118c0565b611947565b82525050565b60006114d58289611267565b6020820191506114e582886112f0565b91506114f182876110b2565b91506114fd82866114b2565b60018201915061150d828561149b565b60208201915061151d828461103d565b601482019150819050979650505050505050565b6000606082019050611546600083018661101f565b611553602083018561101f565b611560604083018461148c565b949350505050565b600060208201905081810360008301526115828184611185565b905092915050565b600060e08201905061159f600083018a611258565b81810360208301526115b181896112b7565b905081810360408301526115c58188611054565b90506115d4606083018761101f565b81810360808301526115e68186611054565b905081810360a08301526115fa81856111fa565b905081810360c083015261160e8184611110565b905098975050505050505050565b6000602082019050818103600083015261163581611321565b9050919050565b6000602082019050818103600083015261165581611361565b9050919050565b60006020820190508181036000830152611675816113c7565b9050919050565b6000602082019050611691600083018461148c565b92915050565b6000604051905081810181811067ffffffffffffffff821117156116be576116bd611959565b5b8060405250919050565b600067ffffffffffffffff8211156116e3576116e2611959565b5b602082029050602081019050919050565b600067ffffffffffffffff82111561170f5761170e611959565b5b601f19601f8301169050602081019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b6000819050602082019050919050565b600081519050919050565b600081519050919050565b600081519050919050565b600081519050919050565b600081519050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b6000602082019050919050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b600082825260208201905092915050565b600061186782611896565b9050919050565b60008115159050919050565b6000819050919050565b600061188f8261185c565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b82818337600083830152505050565b60005b838110156118fa5780820151818401526020810190506118df565b83811115611909576000848401525b50505050565b600061191a8261192b565b9050919050565b6000819050919050565b600061193682611979565b9050919050565b6000819050919050565b60006119528261196c565b9050919050565bfe5b6000601f19601f8301169050919050565b60008160f81b9050919050565b60008160601b9050919050565b61198f8161185c565b811461199a57600080fd5b50565b6119a68161186e565b81146119b157600080fd5b50565b6119bd8161187a565b81146119c857600080fd5b50565b6119d481611884565b81146119df57600080fd5b50565b6119eb816118b6565b81146119f657600080fd5b50565b611a02816118c0565b8114611a0d57600080fd5b5056fea26469706673582212208b95e7c13f1e1dacb71273201be1ac2ca659d090b9a9f13ca5589684a4eac29364736f6c63430007040033",
  "devdoc": {
    "kind": "dev",
    "methods": {
      "constructor": {
        "params": {
          "_allowedERC20Address": "address of the ERC20 compatible token provider",
          "_turnBasedGameAddress": "address of the TurnBasedGame contract used for starting games"
        }
      },
      "getQueue(bytes32,bytes,address[],uint8,uint256,address)": {
        "params": {
          "_gameERC20Address": "address for a ERC20 compatible token provider",
          "_gameMetadata": "game-specific initial metadata/parameters",
          "_gameMinFunds": "minimum funds required to be staked in order to join the game",
          "_gameNumPlayers": "number of players in the game",
          "_gameTemplateHash": "template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)",
          "_gameValidators": "addresses of the validator nodes that will run a Descartes verification should it be needed"
        },
        "returns": {
          "_0": "array of QueuedPlayer structs representing the currently enqueued players for the specified game"
        }
      },
      "joinGame(bytes32,bytes,address[],uint8,uint256,address,uint256,bytes)": {
        "params": {
          "_gameERC20Address": "address for a ERC20 compatible token provider",
          "_gameMetadata": "game-specific initial metadata/parameters",
          "_gameMinFunds": "minimum funds required to be staked in order to join the game",
          "_gameNumPlayers": "number of players in the game",
          "_gameTemplateHash": "template hash for the Cartesi Machine computation that verifies the game (identifies the game computation/logic)",
          "_gameValidators": "addresses of the validator nodes that will run a Descartes verification should it be needed",
          "_playerFunds": "amount being staked by the player joining the game",
          "_playerInfo": "game-specific information for the player joining the game"
        }
      },
      "lockFunds(address,address,uint256)": {
        "params": {
          "_playerAddress": "address for the player whose tokens will be locked in lobby account",
          "_playerFunds": "amount being staked by the player joining the game",
          "_tokenProvider": "ERC20 compatible token provider instance"
        }
      }
    },
    "title": "TurnBasedGameLobby",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "constructor": {
        "notice": "Constructor"
      },
      "getQueue(bytes32,bytes,address[],uint8,uint256,address)": {
        "notice": "Retrieves the current queue for a given game (specified by its template hash, metadata and number of players)"
      },
      "joinGame(bytes32,bytes,address[],uint8,uint256,address,uint256,bytes)": {
        "notice": "Allows a player to join a game. People are queued up as they join and the game starts when enough people are available."
      },
      "lockFunds(address,address,uint256)": {
        "notice": "Lock player tokens in the lobby contract until the game start"
      }
    },
    "notice": "Entry point for players to join games handled by the TurnBasedGame contract",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 3994,
        "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
        "label": "allowedERC20Address",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 3996,
        "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
        "label": "turnBasedGame",
        "offset": 0,
        "slot": "1",
        "type": "t_contract(TurnBasedGame)2701"
      },
      {
        "astId": 4008,
        "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
        "label": "queues",
        "offset": 0,
        "slot": "2",
        "type": "t_mapping(t_bytes32,t_array(t_struct(QueuedPlayer)4003_storage)dyn_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_struct(QueuedPlayer)4003_storage)dyn_storage": {
        "base": "t_struct(QueuedPlayer)4003_storage",
        "encoding": "dynamic_array",
        "label": "struct TurnBasedGameLobby.QueuedPlayer[]",
        "numberOfBytes": "32"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_bytes_storage": {
        "encoding": "bytes",
        "label": "bytes",
        "numberOfBytes": "32"
      },
      "t_contract(TurnBasedGame)2701": {
        "encoding": "inplace",
        "label": "contract TurnBasedGame",
        "numberOfBytes": "20"
      },
      "t_mapping(t_bytes32,t_array(t_struct(QueuedPlayer)4003_storage)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct TurnBasedGameLobby.QueuedPlayer[])",
        "numberOfBytes": "32",
        "value": "t_array(t_struct(QueuedPlayer)4003_storage)dyn_storage"
      },
      "t_struct(QueuedPlayer)4003_storage": {
        "encoding": "inplace",
        "label": "struct TurnBasedGameLobby.QueuedPlayer",
        "members": [
          {
            "astId": 3998,
            "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
            "label": "addr",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 4000,
            "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
            "label": "funds",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 4002,
            "contract": "contracts/TurnBasedGameLobby.sol:TurnBasedGameLobby",
            "label": "info",
            "offset": 0,
            "slot": "2",
            "type": "t_bytes_storage"
          }
        ],
        "numberOfBytes": "96"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}